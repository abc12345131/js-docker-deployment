(function(t){function s(s){for(var a,i,c=s[0],r=s[1],l=s[2],p=0,d=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(s);while(d.length)d.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],a=!0,c=1;c<e.length;c++){var r=e[c];0!==o[r]&&(a=!1)}a&&(n.splice(s--,1),t=i(i.s=e[0]))}return t}var a={},o={app:0},n=[];function i(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=a,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)i.d(e,a,function(s){return t[s]}.bind(null,a));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=s,c=c.slice();for(var l=0;l<c.length;l++)s(c[l]);var u=r;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"037b":function(t,s,e){"use strict";e("69f2")},"0cdb":function(t,s,e){"use strict";e("cf3e")},"12ae":function(t,s,e){t.exports=e.p+"img/loading.c1486d8b.gif"},"17d3":function(t,s,e){"use strict";e("e0b4")},"187e":function(t,s,e){},"1b87":function(t,s,e){},"224e":function(t,s,e){"use strict";e("5c13")},"29f0":function(t,s,e){"use strict";e("dda6")},"2bba":function(t,s,e){"use strict";e("b3e4")},3295:function(t,s,e){"use strict";e("3fc8")},"3fc8":function(t,s,e){},"414d":function(t,s,e){"use strict";e("187e")},4169:function(t,s,e){t.exports=e.p+"img/person.d6070008.png"},4300:function(t,s,e){},"56c2":function(t,s,e){},"56d7":function(t,s,e){"use strict";e.r(s);e("f2d0");var a=e("518b"),o=e.n(a),n=(e("e260"),e("e6cf"),e("cca6"),e("a79d"),e("b0c0"),e("2b0e")),i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app"},[e("router-view"),e("FooterGuide",{directives:[{name:"show",rawName:"v-show",value:t.$route.meta.showFooter,expression:"$route.meta.showFooter"}]})],1)},c=[],r=e("5530"),l=e("2f62"),u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"footer_guide"},[e("router-link",{staticClass:"guide_item",class:{on:"/home"===t.$route.path},attrs:{to:"/home"}},[e("span",{staticClass:"item_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_home"})]),e("span",[t._v("Home")])]),e("router-link",{staticClass:"guide_item",class:{on:"/search"===t.$route.path},attrs:{to:"/search"},on:{click:function(s){return t.goTo("/search")}}},[e("span",{staticClass:"item_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_search"})]),e("span",[t._v("Search")])]),e("router-link",{staticClass:"guide_item",class:{on:"/order"===t.$route.path},attrs:{to:"/order"},on:{click:function(s){return t.goTo("/order")}}},[e("span",{staticClass:"item_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_trips"})]),e("span",[t._v("Order")])]),e("router-link",{staticClass:"guide_item",class:{on:"/profile"===t.$route.path},attrs:{to:"/profile"},on:{click:function(s){return t.goTo("/profile")}}},[e("span",{staticClass:"item_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_my_account"})]),e("span",[t._v("Profile")])])],1)},p=[],d=(e("ac1f"),e("5319"),{methods:{goTo:function(t){this.$router.replace(t)}}}),f=d,h=(e("2bba"),e("2877")),_=Object(h["a"])(f,u,p,!1,null,"55fc4ce4",null),v=_.exports,m={mounted:function(){this.getLocation(),this.getAddress(),this.getUserInfo()},methods:Object(r["a"])({},Object(l["b"])(["getLocation","getAddress","getUserInfo"])),components:{FooterGuide:v}},g=m,C=(e("cf25"),Object(h["a"])(g,i,c,!1,null,null,null)),w=C.exports,b=e("caf9"),y=e("12ae"),S=e.n(y),x=e("8c4f"),k=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"home"},[a("Header",{attrs:{title:t.address.formatted_address}},[a("router-link",{staticClass:"header_search",attrs:{slot:"search",to:"/search"},slot:"search"},[a("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_search"})]),a("router-link",{staticClass:"header_login",attrs:{slot:"login",to:t.userInfo._id?"/userinfo":"/login"},slot:"login"},[t.userInfo._id?a("span",{staticClass:"header_login_text"},[a("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_user"})]):a("span",{staticClass:"header_login_text"},[t._v(" Login/Register ")])])],1),a("nav",{staticClass:"home_nav"},[t.categoryArr.length?a("div",{staticClass:"swiper-container"},[a("div",{staticClass:"swiper-wrapper"},t._l(t.categoryArr,(function(s,e){return a("div",{key:e,staticClass:"swiper-slide"},t._l(s,(function(s,e){return a("a",{key:e,staticClass:"link_to_food",attrs:{href:"javascript:"}},[a("div",{staticClass:"food_container"},[a("img",{attrs:{src:t.baseImageUrl+s.image_url}})]),a("span",[t._v(t._s(s.title))])])})),0)})),0),a("div",{staticClass:"swiper-pagination"})]):a("img",{attrs:{src:e("9e2c"),alt:"back"}})]),a("div",{staticClass:"home_shop_list"},[t._m(0),a("ShopList")],1)],1)},j=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop_header"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_more_services"}),e("span",{staticClass:"shop_header_title"},[t._v("Nearby Shop")])])}],O=(e("159b"),e("6d3b")),$=e("8343"),T=e("5dc8"),P=(e("bbe3"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[t._t("search"),e("span",{staticClass:"header_title"},[e("span",{staticClass:"header_title_text ellipsis"},[t._v(t._s(t.title))])]),t._t("login")],2)}),I=[],E={props:{title:String}},A=E,R=(e("414d"),Object(h["a"])(A,P,I,!1,null,"559c65e6",null)),D=R.exports,F=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shop_container"},[t.shops.length?a("ul",{staticClass:"shop_list"},t._l(t.shops,(function(s,e){return a("li",{key:e,staticClass:"shop_li border-1px",on:{click:function(e){return t.$router.push({name:"ShopDetail",params:{place_id:s.place_id}})}}},[a("a",[s.photos?a("div",{staticClass:"shop_left"},[a("img",{staticClass:"shop_img",attrs:{src:t.baseImageUrl+s.photos[0].photo_reference+"&maxwidth=75&key=AIzaSyAm6UAVj67PPF_pdJv2pamLHJdhb5hiE2s"}})]):t._e(),a("div",{staticClass:"shop_right"},[a("section",{staticClass:"shop_detail_header"},[a("h4",{staticClass:"shop_title ellipsis"},[t._v(t._s(s.name))]),t._m(0,!0)]),a("section",{staticClass:"shop_rating_order"},[a("section",{staticClass:"shop_rating_order_left"},[a("Star",{attrs:{score:s.rating,size:24}}),a("div",{staticClass:"rating_section"},[t._v(" "+t._s(s.rating)+" ")]),a("div",{staticClass:"review_section"},[t._v(" Total Review Number: "+t._s(s.user_ratings_total)+" ")])],1),t._m(1,!0)]),t._m(2,!0)])])])})),0):a("ul",t._l(5,(function(t){return a("li",{key:t},[a("img",{attrs:{src:e("bdc5"),alt:"back"}})])})),0)])},N=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"shop_detail_ul"},[e("li",{staticClass:"supports"},[t._v("Certified")]),e("li",{staticClass:"supports"},[t._v("Punctual")]),e("li",{staticClass:"supports"},[t._v("Promotion")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"shop_rating_order_right"},[e("span",{staticClass:"delivery_style delivery_right"},[t._v("BW Dedicated")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"shop_distance"},[e("p",{staticClass:"shop_delivery_msg"},[e("span",[t._v("Starting at $20")]),e("span",{staticClass:"segmentation"},[t._v("/")]),e("span",[t._v("delivery fee: $2.99")])])])}],U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"star",class:"star-"+t.size},t._l(t.starArr,(function(t,s){return e("span",{key:s,staticClass:"star-item",class:t})})),0)},M=[],z=(e("a9e3"),{props:{score:Number,size:Number},computed:{starArr:function(){for(var t=this.score,s=[],e=Math.floor(t),a=0;a<e;a++)s.push("on");10*t-10*e>=5&&s.push("half");while(s.length<5)s.push("off");return s}}}),L=z,H=(e("b79c"),Object(h["a"])(L,U,M,!1,null,"34ccf349",null)),B=H.exports,G={mounted:function(){this.$store.dispatch("getShops")},data:function(){return{baseImageUrl:"https://maps.googleapis.com/maps/api/place/photo?photo_reference="}},computed:Object(r["a"])({},Object(l["d"])(["shops"])),components:{Star:B}},J=G,V=(e("9dbb"),Object(h["a"])(J,F,N,!1,null,"3f37f829",null)),Y=V.exports,W={mounted:function(){this.$store.dispatch("getFoodCategories"),O["a"].use([$["a"],T["a"]])},data:function(){return{baseImageUrl:"https://fuss10.elemecdn.com"}},components:{Header:D,ShopList:Y},computed:Object(r["a"])(Object(r["a"])({},Object(l["d"])(["address","foodCategories","userInfo"])),{},{categoryArr:function(){var t=this.foodCategories,s=[],e=[];return t.forEach((function(t){8===e.length&&(e=[]),0===e.length&&s.push(e),e.push(t)})),s}}),watch:{foodCategories:function(t){this.$nextTick((function(){new O["a"](".swiper-container",{loop:!0,pagination:{el:".swiper-pagination"}})}))}}},Z=W,q=(e("e263"),Object(h["a"])(Z,k,j,!1,null,"5e5a00ba",null)),K=q.exports,X=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"search"},[e("Header",{attrs:{title:"Search"}}),e("form",{staticClass:"search_form",on:{submit:function(s){return s.preventDefault(),t.search.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search_input",attrs:{type:"search",placeholder:"Please input shop name"},domProps:{value:t.keyword},on:{input:function(s){s.target.composing||(t.keyword=s.target.value)}}}),e("input",{staticClass:"search_submit",attrs:{type:"submit"}})]),t.noSearchShops?e("div",{staticClass:"search_none"},[t._v("Sorry！No result")]):e("section",{staticClass:"list"},[e("ul",{staticClass:"list_container"},t._l(t.searchShops,(function(s){return e("router-link",{key:s.place_id,staticClass:"list_li",attrs:{to:{name:"ShopDetail",params:{place_id:s.place_id}},tag:"li"}},[e("section",{staticClass:"shop_left"},[e("img",{staticClass:"shop_img",attrs:{src:t.baseImageUrl+s.photos[0].photo_reference+"&maxwidth=75&key=AIzaSyAm6UAVj67PPF_pdJv2pamLHJdhb5hiE2s"}})]),e("section",{staticClass:"shop_right"},[e("div",{staticClass:"shop_right_text"},[e("div",[e("span",[t._v(t._s(s.name))])]),e("Star",{attrs:{score:s.rating,size:24}}),e("div",[t._v(" "+t._s(s.rating)+" ")]),e("div",[t._v(" Total Review Number: "+t._s(s.user_ratings_total)+" ")])],1)])])})),1)])],1)},Q=[],tt=(e("498a"),{components:{Header:D,Star:B},data:function(){return{keyword:"",noSearchShops:!1,baseImageUrl:"https://maps.googleapis.com/maps/api/place/photo?photo_reference="}},computed:Object(r["a"])({},Object(l["d"])(["searchShops"])),methods:{search:function(){var t=this.keyword.trim();t&&this.$store.dispatch("searchShops",{keyword:t})}},watch:{searchShops:function(t){t.length?this.noSearchShops=!1:this.noSearchShops=!0}}}),st=tt,et=(e("0cdb"),Object(h["a"])(st,X,Q,!1,null,"4bc5855f",null)),at=et.exports,ot=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("section",{staticClass:"order"},[a("Header",{attrs:{title:"Order"}}),t.userInfo?t._e():a("section",{staticClass:"order_no_login"},[a("img",{attrs:{src:e("4169")}}),a("h3",[t._v("Check order after login")]),a("button",[t._v("Login now")])])],1)},nt=[],it={components:{Header:D},computed:Object(r["a"])({},Object(l["d"])(["userInfo"]))},ct=it,rt=(e("f847"),Object(h["a"])(ct,ot,nt,!1,null,"5ec0e59e",null)),lt=rt.exports,ut=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"profile"},[e("Header",{attrs:{title:"Profile"}}),e("section",{staticClass:"profile-number"},[e("router-link",{staticClass:"profile-link",attrs:{to:t.userInfo._id?"/userinfo":"/login"}},[e("div",{staticClass:"profile_image"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_user"})]),e("div",{staticClass:"user-info"},[t.userInfo.phone?t._e():e("p",{staticClass:"user-info-top"},[t._v(t._s(t.userInfo.username||"Login/Register"))]),e("p",[e("span",{staticClass:"user-icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_phone"})]),e("span",{staticClass:"icon-mobile-number"},[t._v(t._s(t.userInfo.phone||"Not Applicable"))])])]),e("span",{staticClass:"arrow"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_enter"})])])],1),t._m(0),e("section",{staticClass:"profile_my_order border-1px"},[e("a",{staticClass:"my_order",attrs:{href:"javascript:"}},[t._m(1),e("div",{staticClass:"my_order_div",on:{click:function(s){return t.$router.push("order")}}},[e("span",[t._v("My Orders")]),t._m(2)])]),t._m(3),t._m(4),t._m(5)]),e("section",{staticClass:"profile_info_data border-1px"},[t.userInfo._id?e("mt-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:t.logout}},[t._v("Logout")]):t._e()],1)],1)},pt=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"profile_info_data border-1px"},[e("ul",{staticClass:"info_data_list"},[e("a",{staticClass:"info_data_link",attrs:{href:"javascript:"}},[e("span",{staticClass:"info_data_top"},[e("span",[t._v("0.00")]),t._v("CAD")]),e("span",{staticClass:"info_data_bottom"},[t._v("My Balance")])]),e("a",{staticClass:"info_data_link",attrs:{href:"javascript:"}},[e("span",{staticClass:"info_data_top"},[e("span",[t._v("0")]),t._v("offers")]),e("span",{staticClass:"info_data_bottom"},[t._v("My Offer")])]),e("a",{staticClass:"info_data_link",attrs:{href:"javascript:"}},[e("span",{staticClass:"info_data_top"},[e("span",[t._v("0")]),t._v("points")]),e("span",{staticClass:"info_data_bottom"},[t._v("My Points")])])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_trips"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"my_order_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_enter"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("a",{staticClass:"my_order",attrs:{href:"javascript:"}},[e("span",[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_benefits"})]),e("div",{staticClass:"my_order_div"},[e("span",[t._v("Points Mall")]),e("span",{staticClass:"my_order_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_enter"})])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("a",{staticClass:"my_order",attrs:{href:"javascript:"}},[e("span",[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_premium"})]),e("div",{staticClass:"my_order_div"},[e("span",[t._v("VIP Centre")]),e("span",{staticClass:"my_order_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_enter"})])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("a",{staticClass:"my_order",attrs:{href:"javascript:"}},[e("span",[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_customer_service"})]),e("div",{staticClass:"my_order_div"},[e("span",[t._v("Service Centre")]),e("span",{staticClass:"my_order_icon"},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_enter"})])])])}],dt=(e("5fc6"),e("5af2")),ft=e.n(dt),ht=(e("b6ce"),e("5441")),_t=e.n(ht),vt={components:{Header:D},computed:Object(r["a"])({},Object(l["d"])(["userInfo"])),methods:{logout:function(){var t=this;_t()({title:"Notice",message:"Are you sure to log out?",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Confirm"}).then((function(s){"confirm"==s?(t.$store.dispatch("logout"),ft()("Log out completed!")):console.log("Log out cancelled!")}))}}},mt=vt,gt=(e("c2f7"),Object(h["a"])(mt,ut,pt,!1,null,"6a70edf0",null)),Ct=gt.exports,wt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"loginContainer"},[e("div",{staticClass:"loginInner"},[e("div",{staticClass:"login_header"},[e("h2",{staticClass:"login_logo"},[t._v("BW Delivery")]),e("div",{staticClass:"login_header_title"},[e("a",{class:{on:t.loginSms},attrs:{href:"javascript:;"},on:{click:function(s){t.loginSms=!0}}},[t._v("SMS Login")]),e("a",{class:{on:!t.loginSms},attrs:{href:"javascript:;"},on:{click:function(s){t.loginSms=!1}}},[t._v("Password Login")])])]),e("div",{staticClass:"login_content"},[e("form",{on:{submit:function(s){return s.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{class:{on:t.loginSms}},[e("section",{staticClass:"login_message"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"tel",maxlength:"10",placeholder:"Phone Number"},domProps:{value:t.phone},on:{input:function(s){s.target.composing||(t.phone=s.target.value)}}}),e("button",{staticClass:"get_verification",class:{verified:t.validPhone},attrs:{disabled:!t.validPhone},on:{click:function(s){return s.preventDefault(),t.getVerificationCode.apply(null,arguments)}}},[t._v(" "+t._s(t.countDown?"Code Sent("+t.countDown+"s)":"Get verification code")+" ")])]),e("section",{staticClass:"login_verification"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",maxlength:"8",placeholder:"SMS Verification Code"},domProps:{value:t.code},on:{input:function(s){s.target.composing||(t.code=s.target.value)}}})]),t._m(0)]),e("div",{class:{on:!t.loginSms}},[e("section",[e("section",{staticClass:"login_message"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",maxlength:"12",placeholder:"Username"},domProps:{value:t.username},on:{input:function(s){s.target.composing||(t.username=s.target.value)}}})]),e("section",{staticClass:"login_verification"},["checkbox"===(t.showPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{maxlength:"16",placeholder:"Password",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(s){var e=t.password,a=s.target,o=!!a.checked;if(Array.isArray(e)){var n=null,i=t._i(e,n);a.checked?i<0&&(t.password=e.concat([n])):i>-1&&(t.password=e.slice(0,i).concat(e.slice(i+1)))}else t.password=o}}}):"radio"===(t.showPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{maxlength:"16",placeholder:"Password",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(s){t.password=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{maxlength:"16",placeholder:"Password",type:t.showPassword?"text":"password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}}),e("div",{staticClass:"switch_button off",class:t.showPassword?"on":"off",on:{click:function(s){t.showPassword=!t.showPassword}}},[e("div",{staticClass:"switch_circle",class:{right:t.showPassword}}),e("span",{staticClass:"switch_text"},[t._v(t._s(t.showPassword?"abc":"..."))])])]),e("section",{staticClass:"login_message"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],attrs:{type:"text",maxlength:"11",placeholder:"Captcha Code"},domProps:{value:t.captcha},on:{input:function(s){s.target.composing||(t.captcha=s.target.value)}}}),e("img",{ref:"captcha",staticClass:"get_verification",attrs:{src:"http://server:4000/api/v1/captcha",alt:"captcha"},on:{click:t.getCaptcha}})])])]),e("button",{staticClass:"login_submit"},[t._v("Login")])]),e("a",{staticClass:"about_us",attrs:{href:"javascript:;"}},[t._v("About us")])]),e("a",{staticClass:"go_back",attrs:{href:"javascript:"},on:{click:function(s){return t.$router.back()}}},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_back"})])]),e("AlertTip",{directives:[{name:"show",rawName:"v-show",value:t.showAlert,expression:"showAlert"}],attrs:{alertText:t.alertText},on:{closeTip:t.closeTip}})],1)},bt=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",{staticClass:"login_hint"},[t._v(" Reminder: If this phone number have Please enter registered with us, it will be automatically registered when you log in, and this means that you have agreed to "),e("a",{attrs:{href:"javascript:;"}},[t._v("《User Service Agreement》")])])}],yt=e("1da1"),St=(e("96cf"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"alert_container"},[e("section",{staticClass:"tip_text_container"},[t._m(0),e("p",{staticClass:"tip_text"},[t._v(t._s(t.alertText))]),e("div",{staticClass:"confrim",on:{click:t.closeTip}},[t._v("Confirm")])])])}),xt=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tip_icon"},[e("span"),e("span")])}],kt={props:{alertText:String},methods:{closeTip:function(){this.$emit("closeTip")}}},jt=kt,Ot=(e("5a52"),Object(h["a"])(jt,St,xt,!1,null,"1b85fc44",null)),$t=Ot.exports,Tt=(e("d3b7"),e("bc3a")),Pt=e.n(Tt);function It(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(a,o){var n=null;switch(e){case"GET":n=Pt.a.get(t,{params:s});break;case"POST":n=Pt.a.post(t,s);break;case"PUT":n=Pt.a.put(t,s);break;case"DELETE":n=Pt.a.delete(t,{params:s});break;default:console.log("Request type is wrong!")}n.then((function(t){a(t.data)})).catch((function(t){o(t.message)}))}))}var Et="/api/v1",At=function(t,s,e){return It(Et+"/users/username",{username:t,password:s,captcha:e},"POST")},Rt=function(t,s){return It(Et+"/users/phone",{phone:t,code:s},"POST")},Dt=function(){return It(Et+"/users/logout",{},"POST")},Ft=function(){return It(Et+"/categories")},Nt=function(t,s){return It(Et+"/address",{latitude:t,longitude:s})},Ut=function(t,s,e){return It(Et+"/shops",{latitude:t,longitude:s,keyword:e})},Mt=function(t){return It(Et+"/smscode",{phone:t})},zt=function(){return It(Et+"/users")},Lt=function(t){return It(Et+"/goods",{place_id:t})},Ht=function(t){return It(Et+"/ratings",{place_id:t})},Bt=function(t){return It(Et+"/infos",{place_id:t})},Gt={components:{AlertTip:$t},data:function(){return{loginSms:!0,countDown:0,showPassword:!0,phone:"",code:"",username:"",password:"",captcha:"",alertText:"",showAlert:!1}},methods:{getVerificationCode:function(){var t=this;return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.countDownId){s.next=7;break}return t.countDown=30,t.countDownId=setInterval((function(){t.countDown--,t.countDown<=0&&(clearInterval(t.countDownId),t.countDownId=void 0)}),1e3),s.next=5,Mt(t.phone);case 5:e=s.sent,1===e.status&&(t.getTip(e.msg),t.countDown&&(t.countDown=0,clearInterval(t.countDownId),t.countDownId=void 0));case 7:case"end":return s.stop()}}),s)})))()},getTip:function(t){this.showAlert=!0,this.alertText=this.alertText+t},closeTip:function(){this.showAlert=!1,this.alertText=""},getCaptcha:function(){this.$refs.captcha.src="http://localhost/api/v1/captcha?time="+Date.now()},login:function(){var t=this;return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e,a,o,n,i,c,r,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.loginSms){s.next=8;break}return a=t.validPhone,o=t.phone,n=t.code,a?/^\d{6}$/.test(n)||t.getTip("Please enter a valid verification code!"):t.getTip("Phone number must be 10 digits number only without space"),s.next=5,Rt(o,n);case 5:e=s.sent,s.next=13;break;case 8:return i=t.username,c=t.password,r=t.captcha,/^\w{6,12}$/.test(i)?/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,16}$/.test(c)?/^[\da-zA-Z]{4}$/.test(r)||t.getTip("Please enter a valid captcha!"):t.getTip("Password should include 8 to 16 digits, at least two of the following character types: letters, numbers and special characters."):t.getTip("Username must include 6 to 12 digits the following character types: uppercase, lowercase, numbers, and _ symbol."),s.next=12,At(i,c,r);case 12:e=s.sent;case 13:t.countDown&&(t.countDown=0,clearInterval(t.countDownId),t.countDownId=void 0),0===e.status?(l=e.data,t.$store.dispatch("saveUserInfo",l),t.$router.replace("/profile")):(t.getCaptcha(),t.getTip(e.msg));case 15:case"end":return s.stop()}}),s)})))()}},computed:{validPhone:function(){return/^[0-9]{10}$/.test(this.phone)}}},Jt=Gt,Vt=(e("224e"),Object(h["a"])(Jt,wt,bt,!1,null,"173a5ee5",null)),Yt=Vt.exports,Wt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("ShopHeader"),e("div",{staticClass:"tab"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/shop/goods",replace:""}},[t._v("Food")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/shop/ratings",replace:""}},[t._v("Rating")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/shop/infos",replace:""}},[t._v("About")])],1)]),e("keep-alive",[e("router-view")],1)],1)},Zt=[],qt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop-header"},[e("nav",{staticClass:"shop-nav",style:{backgroundImage:"url("+t.infos.bgImg+")"}},[e("a",{staticClass:"back",on:{click:function(s){return t.$router.push("/home")}}},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_back"})])]),e("div",{staticClass:"shop-content",on:{click:t.toggleShopShow}},[e("img",{staticClass:"content-image",attrs:{src:t.infos.avatar}}),e("div",{staticClass:"header-content"},[e("h2",{staticClass:"content-title"},[t._m(0),e("span",{staticClass:"content-name"},[t._v(t._s(t.infos.name))]),e("i",{staticClass:"content-icon"})]),e("div",{staticClass:"shop-message"},[e("span",{staticClass:"shop-message-detail"},[t._v(t._s(t.infos.score))]),e("span",{staticClass:"shop-message-detail"},[t._v("Monthly: "+t._s(t.infos.sellCount)+"orders")]),e("span",{staticClass:"shop-message-detail"},[t._v(" "+t._s(t.infos.description)+": "),e("span",[t._v(t._s(t.infos.deliveryTime)+"mins")])]),e("span",{staticClass:"shop-message-detail"},[t._v("Distance: "+t._s(t.infos.distance))])])])]),t.infos.supports?e("div",{staticClass:"shop-header-discounts",on:{click:t.toggleSupportShow}},[e("div",{staticClass:"discounts-left"},[e("div",{staticClass:"activity",class:t.supportClasses[t.infos.supports[0].type]},[e("span",{staticClass:"content-tag"},[e("span",{staticClass:"mini-tag"},[t._v(t._s(t.infos.supports[0].name))])]),e("span",{staticClass:"activity-content ellipsis"},[t._v(t._s(t.infos.supports[0].content))])])]),e("div",{staticClass:"discounts-right"},[t._v(" "+t._s(t.infos.supports.length)+" offers ")])]):t._e(),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.shopShow,expression:"shopShow"}],staticClass:"shop-brief-modal",on:{click:t.toggleShopShow}},[e("div",{staticClass:"brief-modal-content"},[e("h2",{staticClass:"content-title"},[e("span",{staticClass:"content-tag"},[e("span",{staticClass:"mini-tag"},[t._v("Brand")])]),e("span",{staticClass:"content-name"},[t._v(t._s(t.infos.name))])]),e("ul",{staticClass:"brief-modal-msg"},[e("li",[e("h3",[t._v(t._s(t.infos.score))]),e("p",[t._v("Score")])]),e("li",[e("h3",[t._v(t._s(t.infos.sellCount)+"orders")]),e("p",[t._v("Monthly")])]),e("li",[e("h3",[t._v(t._s(t.infos.deliveryTime)+"mins")]),e("p",[t._v(t._s(t.infos.description))])]),e("li",[e("h3",[t._v("$"+t._s(t.infos.deliveryPrice))]),e("p",[t._v("Deliver Fee")])]),e("li",[e("h3",[t._v(t._s(t.infos.distance))]),e("p",[t._v("Distance")])])]),e("h3",{staticClass:"brief-modal-title"},[e("span",[t._v("Bulletin")])]),e("div",{staticClass:"brief-modal-notice"},[t._v(" "+t._s(t.infos.bulletin)+" ")])]),e("div",{staticClass:"brief-modal-cover"})])]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.supportShow,expression:"supportShow"}],staticClass:"activity-sheet",on:{click:t.toggleSupportShow}},[e("div",{staticClass:"activity-sheet-content"},[e("h2",{staticClass:"activity-sheet-title"},[t._v("Offers")]),e("ul",{staticClass:"list"},t._l(t.infos.supports,(function(s,a){return e("li",{key:a,staticClass:"activity-item",class:t.supportClasses[s.type]},[e("span",{staticClass:"content-tag"},[e("span",{staticClass:"mini-tag"},[t._v(t._s(s.name))])]),e("span",{staticClass:"activity-content"},[t._v(t._s(s.content))])])})),0)]),e("div",{staticClass:"activity-sheet-cover"})])])],1)},Kt=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"content-tag"},[e("span",{staticClass:"mini-tag"},[t._v("Brand")])])}],Xt={data:function(){return{supportClasses:["activity-green","activity-red","activity-orange"],shopShow:!1,supportShow:!1}},computed:Object(r["a"])({},Object(l["d"])(["infos"])),methods:{toggleShopShow:function(){this.shopShow=!this.shopShow},toggleSupportShow:function(){this.supportShow=!this.supportShow}}},Qt=Xt,ts=(e("17d3"),Object(h["a"])(Qt,qt,Kt,!1,null,"a7f49afe",null)),ss=ts.exports,es={mounted:function(){this.$store.dispatch("getShopInfos",{place_id:this.place_id})},components:{ShopHeader:ss},computed:Object(r["a"])({},Object(l["d"])(["place_id"]))},as=es,os=(e("b8ce"),Object(h["a"])(as,Wt,Zt,!1,null,"eebc947e",null)),ns=os.exports,is=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"goods"},[e("div",{staticClass:"menu-wrapper"},[e("ul",t._l(t.goods,(function(s,a){return e("li",{key:a,staticClass:"menu-item",class:{current:a===t.currentIndex},on:{click:function(s){return t.clickMenuItem(a)}}},[e("span",{staticClass:"text bottom-border-1px"},[s.icon?e("img",{staticClass:"icon",attrs:{src:s.icon}}):t._e(),t._v(" "+t._s(s.name)+" ")])])})),0)]),e("div",{staticClass:"foods-wrapper"},[e("ul",{ref:"foodsUl"},t._l(t.goods,(function(s,a){return e("li",{key:a,staticClass:"food-list-hook"},[e("h1",{staticClass:"title"},[t._v(t._s(s.name))]),e("ul",t._l(s.foods,(function(s,a){return e("li",{key:a,staticClass:"food-item bottom-border-1px",on:{click:function(e){return t.showFood(s)}}},[e("div",{staticClass:"icon"},[e("img",{attrs:{width:"57",height:"57",src:s.icon}})]),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"desc"},[t._v(t._s(s.description))]),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v(t._s(s.sellCount)+"orders this month")]),e("span",[t._v("Commend Rate: "+t._s(s.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("$"+t._s(s.price))]),s.oldPrice?e("span",{staticClass:"old"},[t._v("$"+t._s(s.oldPrice))]):t._e()]),e("div",{staticClass:"cartcontrol-wrapper"},[e("CartControl",{attrs:{food:s}})],1)])])})),0)])})),0)]),e("ShopCart")],1),e("Food",{ref:"food",attrs:{food:t.food}})],1)},cs=[],rs=(e("c740"),e("fb6a"),e("f40f")),ls=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("transition",{attrs:{name:"move"}},[t.food.count?e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_remove",on:{click:function(s){return s.stopPropagation(),t.updateFoodCount(!1)}}}):t._e()]),t.food.count?e("div",{staticClass:"cart-count"},[t._v(t._s(t.food.count))]):t._e(),e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_add",on:{click:function(s){return s.stopPropagation(),t.updateFoodCount(!0)}}})],1)},us=[],ps={props:{food:Object},methods:{updateFoodCount:function(t){this.$store.dispatch("updateFoodCount",{isAdd:t,food:this.food})}}},ds=ps,fs=(e("29f0"),Object(h["a"])(ds,ls,us,!1,null,"5c32caeb",null)),hs=fs.exports,_s=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.isShow?e("div",{staticClass:"food"},[e("div",{staticClass:"food-content"},[e("div",{staticClass:"image-header"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}]}),e("p",{staticClass:"foodpanel-desc"},[t._v(t._s(t.food.info))]),e("div",{staticClass:"back",on:{click:t.toggleShow}},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_back"})])]),e("div",{staticClass:"content"},[e("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),e("div",{staticClass:"detail"},[e("span",{staticClass:"sell-count"},[t._v(t._s(t.food.sellCount)+"orders this month")]),e("span",{staticClass:"rating"},[t._v("Commend Rate: "+t._s(t.food.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("$"+t._s(t.food.price))]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("$"+t._s(t.food.oldPrice))])]),e("div",{staticClass:"cartcontrol-wrapper"},[e("CartControl",{attrs:{food:t.food}})],1)])]),e("div",{staticClass:"food-cover",on:{click:t.toggleShow}})]):t._e()},vs=[],ms={props:{food:Object},components:{CartControl:hs},data:function(){return{isShow:!1}},methods:{toggleShow:function(){this.isShow=!this.isShow}}},gs=ms,Cs=(e("6e64"),Object(h["a"])(gs,_s,vs,!1,null,"ae807130",null)),ws=Cs.exports,bs=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"shopcart"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-left",on:{click:t.toggleShow}},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{highlight:t.totalCount}},[e("i",{staticClass:"iconfont icon-yangshi_icon_tongyong_cart",class:{highlight:t.totalCount}})]),t.totalCount?e("div",{staticClass:"num"},[t._v(t._s(t.totalCount))]):t._e()]),e("div",{staticClass:"price",class:{highlight:t.totalCount}},[t._v("$"+t._s(t.totalPrice))]),e("div",{staticClass:"desc"},[t._v("Deliver Fee: $"+t._s(t.infos.deliveryPrice))])]),e("div",{staticClass:"content-right"},[e("div",{staticClass:"pay",class:t.payClass},[t._v(" "+t._s(t.payText)+" ")])])]),e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[e("div",{staticClass:"list-header"},[e("h1",{staticClass:"title"},[t._v("Shop Cart")]),e("span",{staticClass:"empty",on:{click:t.clearCart}},[t._v("Clear Cart")])]),e("div",{staticClass:"list-content"},[e("ul",t._l(t.cartFoods,(function(s,a){return e("li",{key:a,staticClass:"food"},[e("span",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"price"},[e("span",[t._v("$"+t._s(s.price))])]),e("div",{staticClass:"cartcontrol-wrapper"},[e("CartControl",{attrs:{food:s}})],1)])})),0)])])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.toggleShow}})])},ys=[],Ss={data:function(){return{isShow:!1}},components:{CartControl:hs},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["d"])(["infos","cartFoods"])),Object(l["c"])(["totalCount","totalPrice"])),{},{payClass:function(){var t=this.totalPrice,s=this.infos.minPrice;return t>=s?"enough":"not-enough"},payText:function(){var t=this.totalPrice,s=this.infos.minPrice;return 0===t?"Minimum: $".concat(s):t<s?"$".concat(s-t," more to go"):"Checkout"},listShow:function(){var t=this;return 0===this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new rs["a"](".list-content",{click:!0})})),this.isShow)}}),methods:{toggleShow:function(){this.totalCount>0&&(this.isShow=!this.isShow)},clearCart:function(){var t=this;_t()({title:"Notice",message:"Are you sure to clear shop cart?",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Confirm"}).then((function(s){"confirm"==s?t.$store.dispatch("clearCart"):console.log("Clear shop cart cancelled!")}))}}},xs=Ss,ks=(e("5c0d"),Object(h["a"])(xs,bs,ys,!1,null,"19e1355c",null)),js=ks.exports,Os={mounted:function(){var t=this;this.$store.dispatch("savePlaceId",{place_id:this.$route.params.place_id}),this.$store.dispatch("getShopGoods",{place_id:this.place_id}).then((function(){t.$nextTick((function(){t._initScroll(),t._initTop()}))}))},components:{CartControl:hs,Food:ws,ShopCart:js},data:function(){return{scrollY:0,tops:[],food:{}}},computed:Object(r["a"])(Object(r["a"])({},Object(l["d"])(["place_id","goods"])),{},{currentIndex:function(){var t=this.scrollY,s=this.tops,e=s.findIndex((function(e,a){return t>=e&&t<s[a+1]}));return e}}),methods:{_initScroll:function(){var t=this;new rs["a"](".menu-wrapper",{click:!0}),this.foodsScroll=new rs["a"](".foods-wrapper",{probeType:3,click:!0}),this.foodsScroll.on("scroll",(function(s){s.x;var e=s.y;t.scrollY=Math.abs(e)}))},_initTop:function(){var t=[],s=0;t.push(s);var e=this.$refs.foodsUl.getElementsByClassName("food-list-hook");Array.prototype.slice.call(e).forEach((function(e){s+=e.clientHeight,t.push(s)})),this.tops=t},clickMenuItem:function(t){this.scrollY=this.tops[t],this.foodsScroll.scrollTo(0,-this.scrollY,250)},showFood:function(t){this.food=t,this.$refs.food.toggleShow()}}},$s=Os,Ts=(e("3295"),Object(h["a"])($s,is,cs,!1,null,"3414245f",null)),Ps=Ts.exports,Is=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop-infos"},[e("div",{staticClass:"infos-content"},[e("section",{staticClass:"section"},[e("h3",{staticClass:"section-title"},[t._v("Delivery Information")]),e("div",{staticClass:"delivery"},[e("div",[e("span",{staticClass:"delivery-icon"},[t._v(t._s(t.infos.description))]),e("span",[t._v("BW Dedicated delivery")])]),e("div",{staticClass:"delivery-money"},[e("span",[t._v(t._s(t.infos.distance)+" from your location, takes about "+t._s(t.infos.deliveryTime)+"mins on average")]),e("br"),e("span",[t._v("Deliver Fee: $"+t._s(t.infos.deliveryPrice))])])])]),e("div",{staticClass:"split"}),e("section",{staticClass:"section"},[e("h3",{staticClass:"section-title"},[t._v("Activities&Services")]),t.infos.supports.length?e("div",{staticClass:"activity"},t._l(t.infos.supports,(function(s,a){return e("div",{key:a,staticClass:"activity-item",class:t.supportClasses[s.type]},[e("span",{staticClass:"content-tag"},[e("span",{staticClass:"mini-tag"},[t._v(t._s(s.name))])]),e("span",{staticClass:"activity-content"},[t._v(t._s(s.content))])])})),0):t._e()]),e("div",{staticClass:"split"}),e("section",{staticClass:"section"},[e("h3",{staticClass:"section-title"},[t._v("Photos")]),e("div",{staticClass:"pic-wrapper"},[t.infos.pics.length?e("ul",{ref:"picsUl",staticClass:"pic-list"},t._l(t.infos.pics,(function(t,s){return e("li",{key:s,staticClass:"pic-item"},[e("img",{attrs:{width:"120",height:"90",src:t}})])})),0):t._e()])]),e("div",{staticClass:"split"}),e("section",{staticClass:"section"},[e("h3",{staticClass:"section-title"},[t._v("Shop Information")]),e("ul",{staticClass:"detail"},[e("li",[e("span",{staticClass:"bold"},[t._v("Category")]),t._v(" "),e("span",[t._v(t._s(t.infos.category))])]),e("li",[e("span",{staticClass:"bold"},[t._v("Phone Number")]),t._v(" "),e("span",[t._v(t._s(t.infos.phone))])]),e("li",[e("span",{staticClass:"bold"},[t._v("Address")]),t._v(" "),e("span",[t._v(t._s(t.infos.address))])]),e("li",[e("span",{staticClass:"bold"},[t._v("Business hours")]),t._v(" "),e("span",[t._v(t._s(t.infos.workTime))])])])])])])},Es=[],As={mounted:function(){this.infos.pics&&this._initScroll()},data:function(){return{supportClasses:["activity-green","activity-red","activity-orange"]}},computed:Object(r["a"])({},Object(l["d"])(["infos"])),methods:{_initScroll:function(){new rs["a"](".shop-infos");var t=this.$refs.picsUl,s=120,e=6,a=this.infos.pics.length;t.style.width=(s+e)*a-e+"px",new rs["a"](".pic-wrapper",{scrollX:!0})}},watch:{infos:function(){var t=this;this.$nextTick((function(){t._initScroll()}))}}},Rs=As,Ds=(e("037b"),Object(h["a"])(Rs,Is,Es,!1,null,"61f2774c",null)),Fs=Ds.exports,Ns=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"ratings",staticClass:"ratings"},[e("div",{staticClass:"ratings-content"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"overview-left"},[e("h1",{staticClass:"score"},[t._v(t._s(t.infos.score))]),e("div",{staticClass:"title"},[t._v("Overall Rating")]),e("div",{staticClass:"rank"},[t._v("Higher than 92% surrounding businesses")])]),e("div",{staticClass:"overview-right"},[e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("Service Attitude:")]),e("Star",{attrs:{score:t.infos.serviceScore,size:36}}),e("span",{staticClass:"score"},[t._v(t._s(t.infos.serviceScore))])],1),e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("Food Rating:")]),e("Star",{attrs:{score:t.infos.foodScore,size:36}}),e("span",{staticClass:"score"},[t._v(t._s(t.infos.foodScore))])],1),e("div",{staticClass:"delivery-wrapper"},[e("span",{staticClass:"title"},[t._v("Delivery Time:")]),e("span",{staticClass:"delivery"},[t._v(t._s(t.infos.deliveryTime)+"mins")])])])]),e("div",{staticClass:"split"}),e("div",{staticClass:"ratingselect"},[e("div",{staticClass:"rating-type border-1px"},[e("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(s){return t.setSelectType(2)}}},[t._v(" Total"),e("span",{staticClass:"count"},[t._v(t._s(t.ratings.length))])]),e("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(s){return t.setSelectType(0)}}},[t._v(" Satisfied"),e("span",{staticClass:"count"},[t._v(t._s(t.positiveSize))])]),e("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(s){return t.setSelectType(1)}}},[t._v(" Unsatisfied"),e("span",{staticClass:"count"},[t._v(t._s(t.ratings.length-t.positiveSize))])])]),e("div",{staticClass:"switch",class:{on:t.onlyShowText},on:{click:t.toggleOnlyShowText}},[e("span",{staticClass:"iconfont icon-yangshi_icon_tongyong_selected"}),e("span",{staticClass:"text"},[t._v("Reviews with content only")])])]),e("div",{staticClass:"rating-wrapper"},[e("ul",t._l(t.filterRatings,(function(s,a){return e("li",{key:a,staticClass:"rating-item"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"28",height:"28",src:s.avatar}})]),e("div",{staticClass:"content"},[e("h1",{staticClass:"name"},[t._v(t._s(s.username))]),e("div",{staticClass:"star-wrapper"},[e("Star",{attrs:{score:s.score,size:24}}),e("span",{staticClass:"delivery"},[t._v(t._s(s.deliveryTime+(s.deliveryTime?"mins":"")))])],1),e("p",{staticClass:"text"},[t._v(t._s(s.text))]),e("div",{staticClass:"recommend"},[e("span",{staticClass:"iconfont",class:0===s.rateType?"icon-thumb_up":"icon-thumb_down"}),t._l(s.recommend,(function(s,a){return e("span",{key:a,staticClass:"item"},[t._v(t._s(s))])}))],2),e("div",{staticClass:"time"},[t._v(t._s(t._f("date-format")(s.rateTime)))])])])})),0)])])])},Us=[],Ms=(e("4de4"),{data:function(){return{onlyShowText:!1,selectType:2}},components:{Star:B},mounted:function(){var t=this;this.$store.dispatch("getShopRatings",{place_id:this.place_id}).then((function(){t.$nextTick((function(){new rs["a"](t.$refs.ratings,{click:!0})}))}))},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["d"])(["place_id","infos","ratings"])),Object(l["c"])(["positiveSize"])),{},{filterRatings:function(){var t=this.ratings,s=this.onlyShowText,e=this.selectType;return t.filter((function(t){return(2===e||e===t.rateType)&&(!s||t.text.length>0)}))}}),methods:{toggleOnlyShowText:function(){this.onlyShowText=!this.onlyShowText},setSelectType:function(t){this.selectType=t}}}),zs=Ms,Ls=(e("9b6a"),Object(h["a"])(zs,Ns,Us,!1,null,"10f13f51",null)),Hs=Ls.exports;n["default"].use(x["a"]);var Bs,Gs=new x["a"]({mode:"history",routes:[{path:"/home",component:K,meta:{showFooter:!0}},{path:"/search",component:at,meta:{showFooter:!0}},{path:"/order",component:lt,meta:{showFooter:!0}},{path:"/profile",component:Ct,meta:{showFooter:!0}},{path:"/login",component:Yt},{path:"/shop",component:ns,children:[{path:"/shop/goods",name:"ShopDetail",component:Ps,props:!0},{path:"/shop/infos",component:Fs,props:!0},{path:"/shop/ratings",component:Hs,props:!0},{path:"",redirect:"/shop/goods"}]},{path:"/",redirect:"/home"}]}),Js=Gs,Vs={latitude:43.55841697674657,longitude:-79.63860930190087,address:{},foodCategories:[],shops:[],userInfo:{},place_id:"ChIJN8wGluVDK4gRjvRvRBDoT2k",goods:[],ratings:[],infos:{},cartFoods:[],searchShops:[]},Ys=e("ade3"),Ws=(e("a434"),"receive_address"),Zs="receive_foodcategories",qs="receive_shops",Ks="receive_user_info",Xs="reset_user_info",Qs="save_place_id",te="receive_goods",se="receive_ratings",ee="receive_infos",ae="food_count_increment",oe="food_count_decrement",ne="clear_cart",ie="receive_search_shops",ce=(Bs={},Object(Ys["a"])(Bs,Ws,(function(t,s){var e=s.address;t.address=e})),Object(Ys["a"])(Bs,Zs,(function(t,s){var e=s.foodCategories;t.foodCategories=e})),Object(Ys["a"])(Bs,qs,(function(t,s){var e=s.shops;t.shops=e})),Object(Ys["a"])(Bs,Ks,(function(t,s){var e=s.userInfo;t.userInfo=e})),Object(Ys["a"])(Bs,Xs,(function(t){t.userInfo={}})),Object(Ys["a"])(Bs,Qs,(function(t,s){var e=s.place_id;e&&(t.place_id=e)})),Object(Ys["a"])(Bs,te,(function(t,s){var e=s.goods;t.goods=e})),Object(Ys["a"])(Bs,se,(function(t,s){var e=s.ratings;t.ratings=e})),Object(Ys["a"])(Bs,ee,(function(t,s){var e=s.infos;t.infos=e})),Object(Ys["a"])(Bs,ae,(function(t,s){var e=s.food;e.count?e.count++:(n["default"].set(e,"count",1),t.cartFoods.push(e))})),Object(Ys["a"])(Bs,oe,(function(t,s){var e=s.food;e.count&&(e.count--,0===e.count&&t.cartFoods.splice(t.cartFoods.indexOf(e),1))})),Object(Ys["a"])(Bs,ne,(function(t){t.cartFoods.forEach((function(t){return t.count=0})),t.cartFoods=[]})),Object(Ys["a"])(Bs,ie,(function(t,s){var e=s.searchShops;t.searchShops=e,console.log(e)})),Bs),re={getLocation:function(t){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(s){t.state.latitude=s.coords.latitude,t.state.longitude=s.coords.longitude,console.log("Location updated!")}),(function(t){console.error("An error has occured while retrieving location",t)})):console.log("Geolocation is not enabled on this browser!")},getAddress:function(t){return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Nt(t.state.latitude,t.state.longitude);case 2:e=s.sent,0===e.status&&(a=e.data.results[1],t.commit(Ws,{address:a}));case 4:case"end":return s.stop()}}),s)})))()},getFoodCategories:function(t){return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Ft();case 2:e=s.sent,0===e.status&&(a=e.data,t.commit(Zs,{foodCategories:a}));case 4:case"end":return s.stop()}}),s)})))()},getShops:function(t){return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e,a,o,n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=t.state,a=e.latitude,o=e.longitude,s.next=3,Ut(a,o);case 3:n=s.sent,0===n.status&&(i=n.data.results,t.commit(qs,{shops:i}));case 5:case"end":return s.stop()}}),s)})))()},saveUserInfo:function(t,s){t.commit(Ks,{userInfo:s})},getUserInfo:function(t){return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,zt();case 2:e=s.sent,0===e.status&&(a=e.data,t.commit(Ks,{userInfo:a}));case 4:case"end":return s.stop()}}),s)})))()},logout:function(t){return Object(yt["a"])(regeneratorRuntime.mark((function s(){var e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Dt();case 2:e=s.sent,0===e.status&&t.commit(Xs);case 4:case"end":return s.stop()}}),s)})))()},savePlaceId:function(t,s){var e=s.place_id;t.commit(Qs,{place_id:e})},getShopGoods:function(t,s){return Object(yt["a"])(regeneratorRuntime.mark((function e(){var a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.place_id,e.next=3,Lt(a);case 3:o=e.sent,0===o.status&&(n=o.data,t.commit(te,{goods:n}));case 5:case"end":return e.stop()}}),e)})))()},getShopRatings:function(t,s){return Object(yt["a"])(regeneratorRuntime.mark((function e(){var a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.place_id,e.next=3,Ht(a);case 3:o=e.sent,0===o.status&&(n=o.data,t.commit(se,{ratings:n}));case 5:case"end":return e.stop()}}),e)})))()},getShopInfos:function(t,s){return Object(yt["a"])(regeneratorRuntime.mark((function e(){var a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.place_id,e.next=3,Bt(a);case 3:o=e.sent,0===o.status&&(n=o.data,t.commit(ee,{infos:n}));case 5:case"end":return e.stop()}}),e)})))()},updateFoodCount:function(t,s){var e=s.isAdd,a=s.food;e?t.commit(ae,{food:a}):t.commit(oe,{food:a})},clearCart:function(t){t.commit(ne)},searchShops:function(t,s){return Object(yt["a"])(regeneratorRuntime.mark((function e(){var a,o,n,i,c,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.keyword,o=t.state,n=o.latitude,i=o.longitude,e.next=4,Ut(n,i,a);case 4:c=e.sent,0===c.status&&(r=c.data.results,t.commit(ie,{searchShops:r}));case 6:case"end":return e.stop()}}),e)})))()}},le={totalCount:function(t){return t.cartFoods.reduce((function(t,s){return t+s.count}),0)},totalPrice:function(t){return t.cartFoods.reduce((function(t,s){return t+s.count*s.price}),0)},positiveSize:function(t){return t.ratings.reduce((function(t,s){return t+(0===s.rateType?1:0)}),0)}};n["default"].use(l["a"]);var ue=new l["a"].Store({actions:re,mutations:ce,state:Vs,getters:le}),pe=ue,de=e("b166");n["default"].filter("date-format",(function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd HH:mm:ss";return Object(de["a"])(t,s)})),n["default"].config.productionTip=!1,n["default"].component(o.a.name,o.a),n["default"].use(b["a"],{loading:S.a}),new n["default"]({render:function(t){return t(w)},router:Js,store:pe}).$mount("#app")},"5a52":function(t,s,e){"use strict";e("56c2")},"5c0d":function(t,s,e){"use strict";e("5c48")},"5c13":function(t,s,e){},"5c48":function(t,s,e){},"69f2":function(t,s,e){},"6e64":function(t,s,e){"use strict";e("4300")},"732b":function(t,s,e){},9951:function(t,s,e){},"9b6a":function(t,s,e){"use strict";e("1b87")},"9cef":function(t,s,e){},"9dbb":function(t,s,e){"use strict";e("9951")},"9e2c":function(t,s,e){t.exports=e.p+"img/home_back.e9d67c8a.svg"},b3e4:function(t,s,e){},b79c:function(t,s,e){"use strict";e("f4f9")},b8ce:function(t,s,e){"use strict";e("cd6f")},bdc5:function(t,s,e){t.exports=e.p+"img/shop_back.e5caf319.svg"},bea0:function(t,s,e){},c2f7:function(t,s,e){"use strict";e("bea0")},cd6f:function(t,s,e){},cf25:function(t,s,e){"use strict";e("fea6")},cf3e:function(t,s,e){},dda6:function(t,s,e){},e0b4:function(t,s,e){},e263:function(t,s,e){"use strict";e("9cef")},f4f9:function(t,s,e){},f847:function(t,s,e){"use strict";e("732b")},fea6:function(t,s,e){}});
//# sourceMappingURL=app.baad36ef.js.map