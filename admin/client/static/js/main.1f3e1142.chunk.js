(this["webpackJsonpreact-admin_client"]=this["webpackJsonpreact-admin_client"]||[]).push([[0],{331:function(e,t,a){},332:function(e,t,a){},357:function(e,t,a){},429:function(e,t,a){},434:function(e,t,a){},436:function(e,t,a){},445:function(e,t,a){},566:function(e,t,a){},574:function(e,t,a){},575:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(42),i=a.n(s),c=a(106),o=a(181),l=a(305),u=a(306),d="set_head_title",h="";var p=Object(o.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.data;default:return e}}),Object(l.composeWithDevTools)(Object(o.applyMiddleware)(u.a))),j=(a(331),a(332),a(101)),m=a(45),f=(a(48),a(17)),b=(a(236),a(121)),O=(a(82),a(35)),g=a(18),x=a.n(g),v=(a(83),a(29)),y=a(33),w=a(19),k=a(20),C=a(22),S=a(21),P=(a(98),a(44)),N="/upload/",R="user_key",_=new(a(319).a),U={getUser:function(){return _.get(R)||{}},removeUser:function(){_.remove(R)}},T=a(183),A=a(157),F=a.n(A);function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(r,n){var s=null;switch(a){case"GET":s=F.a.get(e,{params:t});break;case"POST":s=F.a.post(e,t);break;case"PUT":s=F.a.put(e,t);break;case"DELETE":s=F.a.delete(e,{params:t});break;default:console.log("Request type is wrong!")}s.then((function(e){r(e.data)})).catch((function(e){v.b.error(e.message)}))}))}var D=function(e){return I("http://api.weatherapi.com/v1/current.json?key=78792b6e7fe541328bd34938210505&q=".concat(e,"&aqi=no"))},q=function(e){return I("/api/categories",{parentId:e})},M=function(e,t){return I("/api/categories",{categoryName:e,parentId:t},"POST")},E=function(e,t){return I("/api/categories",{categoryId:e,categoryName:t},"PUT")},L=function(e){return I("/api/categories/"+e)},z=function(e,t){return I("/api/products",{pageNum:e,pageSize:t})},V=function(e,t,a,r){return I("/api/products/search",Object(T.a)({pageNum:e,pageSize:t},a,r))},J=function(e,t){return I("/api/products/status",{productId:e,status:t},"PUT")},H=function(e){return I("/api/products",e,e._id?"PUT":"POST")},W=function(e){return I("/api/imgs",{name:e},"DELETE")},$=function(e){return I("/api/roles",{roleName:e},"POST")},B=function(e){return I("/api/roles",e,"PUT")},K=function(e,t){return I("/api/users/"+e,{password:t},"POST")},G=function(e){return I("/api/users",e,e._id?"PUT":"POST")},Y=function(e){return I("/api/work/"+e)},Q=a(583),Z=a(584),X=(a(357),a.p+"static/media/logo.da561af0.jpg"),ee=a.p+"static/media/background1.107a276c.jpg",te=a.p+"static/media/waterfall-in-forest.aadad41d.mp4",ae=a(3),re=P.a.Item,ne=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={errorMsg:""},e.onFinish=function(){var t=Object(y.a)(x.a.mark((function t(a){var r,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.username,n=a.password,t.next=3,K(r,n);case 3:0===(s=t.sent).status?(v.b.success("Log in succeed!"),e.props.history.replace("/home")):e.setState({errorMsg:s.msg});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFinishFailed=function(e){v.b.error("Log in failed!")},e}return Object(k.a)(a,[{key:"render",value:function(){var e=U.getUser();if(e&&e._id)return Object(ae.jsx)(m.a,{to:"/home"});var t=this.state.errorMsg;return Object(ae.jsxs)("div",{className:"login",children:[Object(ae.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,poster:ee,className:"bgvid",children:Object(ae.jsx)("source",{src:te,type:"video/mp4"})}),Object(ae.jsxs)("header",{className:"login-header",children:[Object(ae.jsx)("img",{src:X,alt:"logo"}),Object(ae.jsx)("h1",{children:"React Administration System"})]}),Object(ae.jsxs)("section",{className:"login-content",children:[Object(ae.jsx)("div",{className:t?"error-msg show":"error-msg",children:t}),Object(ae.jsx)("h2",{children:"User Login"}),Object(ae.jsxs)(P.a,{name:"normal_login",className:"login-form",initialValues:{username:"admin",password:"admin",remember:!0},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[Object(ae.jsx)(re,{name:"username",rules:[{required:!0,message:"Username is required"}],children:Object(ae.jsx)(O.a,{prefix:Object(ae.jsx)(Q.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(ae.jsx)(re,{name:"password",rules:[{required:!0,message:"Password is required"}],children:Object(ae.jsx)(O.a,{prefix:Object(ae.jsx)(Z.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(ae.jsx)(re,{children:Object(ae.jsx)(re,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(ae.jsx)(b.a,{children:"Remember me"})})}),Object(ae.jsxs)(re,{children:[Object(ae.jsx)(f.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"}),"Or ",Object(ae.jsx)("a",{href:"/register",children:"register now!"})]})]})]})]})}}]),a}(r.Component),se=a(50),ie=(a(145),a(52)),ce=(a(429),a.p+"static/media/background2.938a0d6a.jpg"),oe=a.p+"static/media/stars-in-space.0b394100.mp4",le=P.a.Item,ue=ie.a.Option,de=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={errorMsg:""},e.onFinish=function(){var t=Object(y.a)(x.a.mark((function t(a){var r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(a);case 2:0===(r=t.sent).status?(v.b.success("Register succeed"),e.props.history.replace("/login")):e.setState({errorMsg:r.msg});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFinishFailed=function(e){v.b.error("Register failed!")},e}return Object(k.a)(a,[{key:"render",value:function(){var e=Object(ae.jsx)(le,{name:"prefix",noStyle:!0,children:Object(ae.jsx)(ie.a,{style:{width:70},children:Object(ae.jsx)(ue,{value:"1",children:"+1"})})}),t=this.state.errorMsg;return Object(ae.jsxs)("div",{className:"register",children:[Object(ae.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,poster:ce,className:"bgvid",children:Object(ae.jsx)("source",{src:oe,type:"video/mp4"})}),Object(ae.jsxs)("header",{className:"register-header",children:[Object(ae.jsx)("img",{src:X,alt:"logo"}),Object(ae.jsx)("h1",{children:"React Administration System"})]}),Object(ae.jsxs)("section",{className:"register-content",children:[Object(ae.jsx)("div",{className:t?"error-msg show":"error-msg",children:t}),Object(ae.jsx)("h2",{children:"User Register"}),Object(ae.jsxs)(P.a,Object(se.a)(Object(se.a)({initialValues:{prefix:"1"}},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{name:"register",onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,scrollToFirstError:!0,children:[Object(ae.jsx)(le,{name:"username",label:"Username",rules:[{required:!0,message:"Username is required"},{min:6,message:"Username has to be no less than 6 digits"},{max:12,message:"Username has to be no more than 12 digits"},{pattern:/^[\w]+$/,message:"Username should include only the following character types: uppercase, lowercase, numbers, and _ symbol."}],children:Object(ae.jsx)(O.a,{})}),Object(ae.jsx)(le,{name:"password",label:"Password",rules:[{required:!0,message:"Password is required"},{pattern:/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,16}$/,message:"Password should include 8 to 16 digits, at least two of the following character types: letters, numbers and special characters."}],hasFeedback:!0,children:Object(ae.jsx)(O.a.Password,{})}),Object(ae.jsx)(le,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("Passwords do not match!")):Promise.resolve()}}}],children:Object(ae.jsx)(O.a.Password,{})}),Object(ae.jsx)(le,{name:"phone",label:"Phone Number",rules:[{required:!0,message:"Phone Number is required"},{pattern:/^[0-9]{10}$/,message:"Please enter your 10 digits phone number"}],children:Object(ae.jsx)(O.a,{type:"number",placeholder:"Please input phone number",addonBefore:e,style:{width:"100%"}})}),Object(ae.jsx)(le,{name:"email",label:"Email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input email address"})}),Object(ae.jsxs)(le,Object(se.a)(Object(se.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:[Object(ae.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Register"}),"Or ",Object(ae.jsx)("a",{href:"/login",children:"Log in"})]}))]}))]})]})}}]),a}(r.Component),he=(a(430),a(142)),pe=(a(432),a(79)),je=a(585),me=a(586),fe=a(321),be=a(587),Oe=a(588),ge=a(589),xe=a(590),ve=a(591),ye=a(592),we=[{title:"Home",key:"/home",icon:Object(ae.jsx)(je.a,{style:{fontSize:20}}),isPublic:!0},{title:"Commodity",key:"/commodity",icon:Object(ae.jsx)(me.a,{style:{fontSize:20}}),children:[{title:"Category",key:"/category",icon:Object(ae.jsx)(fe.a,{style:{fontSize:20}})},{title:"Product",key:"/product",icon:Object(ae.jsx)(be.a,{style:{fontSize:20}})}]},{title:"User",key:"/user",icon:Object(ae.jsx)(Q.a,{style:{fontSize:20}})},{title:"Role",key:"/role",icon:Object(ae.jsx)(Oe.a,{style:{fontSize:20}})},{title:"Charts",key:"/charts",icon:Object(ae.jsx)(ge.a,{style:{fontSize:20}}),children:[{title:"Acquisition",key:"/charts/acquisition",icon:Object(ae.jsx)(xe.a,{style:{fontSize:20}})},{title:"Demographics",key:"/charts/demographics",icon:Object(ae.jsx)(ve.a,{style:{fontSize:20}})},{title:"Engagement",key:"/charts/engagement",icon:Object(ae.jsx)(ye.a,{style:{fontSize:20}})}]}],ke=function(e){return{type:d,data:e}},Ce=(a(434),pe.a.SubMenu),Se=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).getMenuNodes=function(e){var t=r.props.location.pathname;return e.map((function(e){return r.hasAuth(e)?e.children?(e.children.find((function(e){return 0===t.indexOf(e.key)}))&&(r.openkey=e.key),Object(ae.jsx)(Ce,{style:{fontSize:20},icon:e.icon,title:e.title,children:r.getMenuNodes(e.children)},e.key)):(e.key!==t&&0!==t.indexOf(e.key)||r.props.setHeadTitle(e.title),Object(ae.jsx)(pe.a.Item,{style:{height:46,fontSize:20},icon:e.icon,children:Object(ae.jsx)(j.b,{to:e.key,onClick:function(){return r.props.setHeadTitle(e.title)},children:e.title})},e.key)):null}))},r.hasAuth=function(e){var t=e.key,a=e.isPublic,r=U.getUser().username,n=U.getUser().role.menus;return!("admin"!==r&&!a&&!n.includes(t))||!!e.children&&!!e.children.find((function(e){return n.includes(e.key)}))},r.menuNodes=r.getMenuNodes(we),r}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props.location.pathname;0===e.indexOf("/product")&&(e="/product");var t=this.openkey;return Object(ae.jsxs)("div",{className:"left-nav",children:[Object(ae.jsxs)(j.b,{to:"/",className:"left-nav-header",children:[Object(ae.jsx)("img",{src:X,alt:"logo"}),Object(ae.jsx)("h1",{children:"Administration System"})]}),Object(ae.jsx)(pe.a,{selectedKeys:[e],defaultOpenKeys:[t],mode:"inline",theme:"dark",children:this.menuNodes})]})}}]),a}(r.Component),Pe=Object(c.b)((function(e){return{}}),{setHeadTitle:ke})(Object(m.g)(Se)),Ne=(a(146),a(68)),Re=a(156);function _e(e){if(!e)return"";var t=new Date(e),a=t.getHours(),r=t.getMinutes(),n=t.getSeconds();return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+(a/10>=1?a:"0"+a)+":"+(r/10>=1?r:"0"+r)+":"+(n/10>=1?n:"0"+n)}a(436);var Ue=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={currentTime:_e(Date.now()),icon:"",text:""},e.getTime=function(){e.intervalId=setInterval((function(){var t=_e(Date.now());e.setState({currentTime:t})}),1e3)},e.getWeather=Object(y.a)(x.a.mark((function t(){var a,r,n,s,i,c,o,l,u,d,h;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D("Toronto");case 2:a=t.sent,r=a.location,n=r.name,s=r.region,i=r.country,c=a.current,o=c.temp_c,l=c.humidity,u=a.current.condition,d=u.icon,h=u.text,e.setState({name:n,region:s,country:i,icon:d,text:h,temp_c:o,humidity:l});case 7:case"end":return t.stop()}}),t)}))),e.logout=function(){(0,Ne.a.confirm)({title:"Do you want to sign out?",icon:Object(ae.jsx)(Re.a,{}),onOk:function(){U.removeUser(),e.props.history.replace("/login")}})},e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.getTime(),this.getWeather()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state,t=e.currentTime,a=e.name,r=e.region,n=e.country,s=e.temp_c,i=e.humidity,c=e.icon,o=e.text,l=U.getUser().username,u=this.props.headTitle;return Object(ae.jsxs)("div",{className:"header",children:[Object(ae.jsxs)("div",{className:"header-top",children:[Object(ae.jsxs)("span",{children:["Hello, ",l]}),Object(ae.jsx)(f.a,{type:"primary",shape:"round",onClick:this.logout,children:"Log out"})]}),Object(ae.jsxs)("div",{className:"header-bottom",children:[Object(ae.jsx)("div",{className:"header-bottom-left",children:u}),Object(ae.jsxs)("div",{className:"header-bottom-right",children:[Object(ae.jsxs)("span",{children:[t,"-",a,",",r,",",n]}),Object(ae.jsx)("img",{src:c,alt:"weather"}),Object(ae.jsxs)("span",{children:[o,",TEMP:",s,"\xb0C,RH:",i,"%"]})]})]})]})}}]),a}(r.Component),Te=Object(c.b)((function(e){return{headTitle:e}}),{})(Object(m.g)(Ue)),Ae=(a(86),a(40)),Fe=(a(576),a(213)),Ie=(a(441),a(158)),De=(a(577),a(315)),qe=a(320),Me=a(593),Ee=a(594),Le=a(595),ze=a(80),Ve=a.n(ze),Je=a(63),He=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){return Object(ae.jsx)("div",{style:{width:"80%",height:250,float:"right"},children:Object(ae.jsxs)(Je.Chart,{height:230,autoFit:!0,data:[{month:"Jan",platform:"PC",visit:7},{month:"Jan",platform:"Andriod",visit:6},{month:"Jan",platform:"iOS",visit:4},{month:"Feb",platform:"PC",visit:7},{month:"Feb",platform:"Andriod",visit:6},{month:"Feb",platform:"iOS",visit:4},{month:"Mar",platform:"PC",visit:10},{month:"Mar",platform:"Andriod",visit:4},{month:"Mar",platform:"iOS",visit:6},{month:"Apr",platform:"PC",visit:15},{month:"Apr",platform:"Andriod",visit:8},{month:"Apr",platform:"iOS",visit:9},{month:"May",platform:"PC",visit:18},{month:"May",platform:"Andriod",visit:11},{month:"May",platform:"iOS",visit:12},{month:"Jun",platform:"PC",visit:22},{month:"Jun",platform:"Andriod",visit:9},{month:"Jun",platform:"iOS",visit:15},{month:"Jul",platform:"PC",visit:25},{month:"Jul",platform:"Andriod",visit:12},{month:"Jul",platform:"iOS",visit:17},{month:"Aug",platform:"PC",visit:27},{month:"Aug",platform:"Andriod",visit:14},{month:"Aug",platform:"iOS",visit:17},{month:"Sep",platform:"PC",visit:23},{month:"Sep",platform:"Andriod",visit:8},{month:"Sep",platform:"iOS",visit:14},{month:"Oct",platform:"PC",visit:18},{month:"Oct",platform:"Andriod",visit:8},{month:"Oct",platform:"iOS",visit:10},{month:"Nov",platform:"PC",visit:14},{month:"Nov",platform:"Andriod",visit:7},{month:"Nov",platform:"iOS",visit:7},{month:"Dec",platform:"PC",visit:10},{month:"Dec",platform:"Andriod",visit:6},{month:"Dec",platform:"iOS",visit:5}],scale:{visit:{min:0,alias:"Users"}},interactions:["element-active"],padding:[20,20,60,80],children:[Object(ae.jsx)(Je.Point,{position:"month*visit",color:"platform",shape:"circle"}),Object(ae.jsx)(Je.Axis,{name:"visit",title:{style:{fontSize:18,textAlign:"center",fill:"#999"},offset:40}}),Object(ae.jsx)(Je.Line,{shape:"smooth",position:"month*visit",color:"platform",label:"visit"}),Object(ae.jsx)(Je.Tooltip,{shared:!0,showCrosshairs:!0})]})})}}]),a}(r.PureComponent),We=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){return Object(ae.jsxs)(Je.Chart,{height:320,autoFit:!0,data:[{year:"1\u6708",views:108},{year:"2\u6708",views:162},{year:"3\u6708",views:116},{year:"4\u6708",views:245},{year:"5\u6708",views:128},{year:"6\u6708",views:98},{year:"7\u6708",views:88},{year:"8\u6708",views:118},{year:"9\u6708",views:108},{year:"10\u6708",views:108},{year:"11\u6708",views:58},{year:"12\u6708",views:68}],interactions:["active-region"],padding:[30,30,30,50],children:[Object(ae.jsx)(Je.Interval,{position:"year*views"}),Object(ae.jsx)(Je.Tooltip,{shared:!0})]})}}]),a}(r.PureComponent),$e=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){return Object(ae.jsxs)(Je.Chart,{height:320,autoFit:!0,data:[{year:"1\u6708",engagements:38},{year:"2\u6708",engagements:52},{year:"3\u6708",engagements:61},{year:"4\u6708",engagements:145},{year:"5\u6708",engagements:48},{year:"6\u6708",engagements:38},{year:"7\u6708",engagements:28},{year:"8\u6708",engagements:38},{year:"9\u6708",engagements:68},{year:"10\u6708",engagements:38},{year:"11\u6708",engagements:58},{year:"12\u6708",engagements:38}],interactions:["active-region"],padding:[30,30,30,50],children:[Object(ae.jsx)(Je.Interval,{position:"year*engagements"}),Object(ae.jsx)(Je.Tooltip,{shared:!0})]})}}]),a}(r.PureComponent),Be=(a(445),"YYYY/MM/DD"),Ke=De.a.RangePicker,Ge=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={work:{},isVisited:!0},e.update=function(){var t=U.getUser()._id;e.initTask(t)},e.initTask=function(){var t=Object(y.a)(x.a.mark((function t(a){var r,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(a);case 2:0===(r=t.sent).status?(n=r.data,e.taskNodes=e.getTaskNodes(n),e.setState({work:n})):v.b.error("Get tasks failed!");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getTaskNodes=function(e){if(e)return e.tasks.map((function(e){return 0===e.status?Object(ae.jsx)(Ie.a.Item,{color:"green",children:e.task},e.task):1===e.status?Object(ae.jsx)(Ie.a.Item,{color:"yellow",children:e.task},e.task):Object(ae.jsx)(Ie.a.Item,{color:"red",children:e.task},e.task)}))},e.handleChange=function(t){return function(){return e.setState({isVisited:t})}},e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){var e=this,t=this.state.isVisited;return Object(ae.jsxs)("div",{className:"home",children:[Object(ae.jsxs)(Ae.a,{className:"home-top",children:[Object(ae.jsxs)(Ae.a,{className:"home-card",title:"Total Views",style:{width:"15%"},headStyle:{color:"rgba(0,0,0,.45)"},children:[Object(ae.jsxs)("div",{className:"help-tip",children:[Object(ae.jsx)(qe.a,{}),Object(ae.jsx)("p",{children:"This is the total page views since the website is launched."})]}),Object(ae.jsx)(Fe.a,{value:2163,style:{fontWeight:"bolder"}}),Object(ae.jsx)(Fe.a,{value:15,valueStyle:{fontSize:15},prefix:"Weekly",suffix:Object(ae.jsxs)("div",{children:["%",Object(ae.jsx)(Me.a,{style:{color:"red",marginLeft:10}})]})}),Object(ae.jsx)(Fe.a,{value:10,valueStyle:{fontSize:15},prefix:"Daily",suffix:Object(ae.jsxs)("div",{children:["%",Object(ae.jsx)(Ee.a,{style:{color:"#3f8600",marginLeft:10}})]})})]}),Object(ae.jsx)(He,{className:"home-chart"})]}),Object(ae.jsxs)(Ae.a,{className:"home-bottom",title:Object(ae.jsxs)("div",{className:"home-menu",children:[Object(ae.jsx)("span",{className:t?"home-menu-active home-menu-visited":"home-menu-visited",onClick:this.handleChange(!0),children:"View"}),Object(ae.jsx)("span",{className:t?"":"home-menu-active",onClick:this.handleChange(!1),children:"Engagement"})]}),extra:Object(ae.jsx)(Ke,{defaultValue:[Ve()("2021/06/01",Be),Ve()("2021/07/01",Be)],format:Be}),children:[Object(ae.jsx)(Ae.a,{className:"home-table-left",title:t?"View Trend":"Engagement Trend",bodyStyle:{padding:0,height:381},children:t?Object(ae.jsx)(We,{}):Object(ae.jsx)($e,{})}),Object(ae.jsx)(Ae.a,{title:"Tasks",extra:Object(ae.jsx)(Le.a,{onClick:function(){return e.update()}}),className:"home-table-right",children:Object(ae.jsx)(Ie.a,{children:this.taskNodes})})]})]})}}]),a}(r.Component),Ye=(a(180),a(105)),Qe=a(596),Ze=a(322),Xe=P.a.Item,et=ie.a.Option,tt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).formRef=n.a.createRef(),r.props.setFormRef(r.formRef),r}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props,t=e.categories,a=e.parentId;return Object(ae.jsxs)(P.a,{initialValues:{classification:a},ref:this.formRef,children:[Object(ae.jsx)(Xe,{name:"classification",children:Object(ae.jsxs)(ie.a,{children:[Object(ae.jsx)(et,{value:"0",children:"Primary Classification"},"0"),t.map((function(e){return Object(ae.jsx)(et,{value:e._id,children:e.name},e._id)}))]})}),Object(ae.jsx)(Xe,{name:"category",rules:[{required:!0,message:"category is required"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input category name"})})]})}}]),a}(r.PureComponent),at=P.a.Item,rt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).formRef=n.a.createRef(),r.props.setFormRef(r.formRef),r}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props.categoryName;return Object(ae.jsx)(P.a,{initialValues:{category:e},ref:this.formRef,children:Object(ae.jsx)(at,{name:"category",rules:[{required:!0,message:"category is required"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input category name"})})})}}]),a}(r.PureComponent),nt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).state={loading:!1,categories:[],subCategories:[],parentId:"0",parentName:"",showStatus:0},r.initColumns=function(){r.columns=[{title:"Class Name",dataIndex:"name"},{title:"Action",width:300,render:function(e){return Object(ae.jsxs)("span",{children:[Object(ae.jsx)(f.a,{type:"link",onClick:function(){return r.showUpdate(e)},children:"Modify"}),"0"===r.state.parentId?Object(ae.jsx)(f.a,{type:"link",onClick:function(){return r.showSubCategories(e)},children:"View"}):null]})}}]},r.getCategories=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({loading:!0}),t=t||r.state.parentId,e.next=4,q(t);case 4:a=e.sent,r.setState({loading:!1}),0===a.status?(n=a.data,"0"===t?r.setState({categories:n}):r.setState({subCategories:n})):v.b.error("Get categrories failed!");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.showSubCategories=function(e){r.setState({parentId:e._id,parentName:e.name},(function(){r.getCategories()}))},r.showCategories=function(){r.setState({subCategories:[],parentId:"0",parentName:""})},r.handleCancel=function(){r.setState({showStatus:0})},r.showAdd=function(){r.setState({showStatus:1})},r.addCategory=function(){r.formRef.current.validateFields().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({showStatus:0}),a=t.classification,n=t.category,e.next=5,M(n,a);case 5:0===e.sent.status&&(a===r.state.parentId?r.getCategories():"0"===a&&r.getCategories("0"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},r.showUpdate=function(e){r.category=e,r.setState({showStatus:2})},r.updateCategory=function(){r.formRef.current.validateFields().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({showStatus:0}),a=r.category._id,n=t.category,e.next=5,E(a,n);case 5:0===e.sent.status&&r.getCategories();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},r.initColumns(),r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.getCategories()}},{key:"render",value:function(){var e=this,t=this.state,a=t.categories,r=t.subCategories,n=t.parentId,s=t.parentName,i=t.showStatus,c=t.loading,o=this.category||{},l="0"===n?Object(ae.jsx)("span",{style:{fontSize:20,fontWeight:"bold"},children:"Primary Classification"}):Object(ae.jsxs)("span",{children:[Object(ae.jsx)(f.a,{type:"link",onClick:this.showCategories,style:{fontSize:20,fontWeight:"bold",marginLeft:-15},children:"Primary classification"}),Object(ae.jsx)(Qe.a,{style:{marginRight:10}}),Object(ae.jsx)("span",{style:{fontSize:20,fontWeight:"bold"},children:s})]}),u=Object(ae.jsxs)(f.a,{type:"primary",onClick:this.showAdd,children:[Object(ae.jsx)(Ze.a,{}),"Add"]});return Object(ae.jsxs)(Ae.a,{title:l,extra:u,children:[Object(ae.jsx)(Ye.a,{bordered:!0,rowKey:"_id",loading:c,dataSource:"0"===n?a:r,columns:this.columns,pagination:{defaultPageSize:5,showQuickJumper:!0}}),Object(ae.jsx)(Ne.a,{title:"Add classification",visible:1===i,onOk:this.addCategory,onCancel:this.handleCancel,getContainer:!1,children:Object(ae.jsx)(tt,{categories:a,parentId:n,setFormRef:function(t){return e.formRef=t}})}),Object(ae.jsx)(Ne.a,{title:"Update classification",visible:2===i,onOk:this.updateCategory,onCancel:this.handleCancel,getContainer:!1,children:Object(ae.jsx)(rt,{categoryName:o.name,setFormRef:function(t){return e.formRef=t}})})]})}}]),a}(r.Component),st=(a(465),a(318)),it=a(155),ct=a(182),ot=a(597),lt=(a(578),a(316));function ut(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}var dt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;Object(w.a)(this,a),(r=t.call(this,e)).state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]},r.handleCancel=function(){return r.setState({previewVisible:!1})},r.handlePreview=function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,ut(t.originFileObj);case 3:t.preview=e.sent;case 4:r.setState({previewImage:t.url||t.preview,previewVisible:!0,previewTitle:t.name||t.url.substring(t.url.lastIndexOf("/")+1)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s,i,c,o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.file,n=t.fileList,"done"!==a.status){e.next=6;break}0===(s=a.response).status?(v.b.success("Picture uploaded successfully!"),i=s.data,c=i.name,o=i.url,(l=n[n.length-1]).name=c,l.url=o):v.b.error("Failed to upload!"),e.next=11;break;case 6:if("removed"!==a.status){e.next=11;break}return e.next=9,W(a.name);case 9:0===e.sent.status?v.b.success("Image deleted successfully!"):v.b.error("Failed to delete image!");case 11:r.setState({fileList:n});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getImgs=function(){return r.state.fileList.map((function(e){return e.name}))};var n=[],s=r.props.imgs;return s&&s.length>0&&(n=s.map((function(e,t){return{uid:-t,name:e,status:"done",url:N+e}}))),r.state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:n},r}return Object(k.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,r=e.fileList,n=e.previewTitle,s=Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Ze.a,{}),Object(ae.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(lt.a,{action:"/api/imgs",accept:"image/*",name:"image",listType:"picture-card",fileList:r,onPreview:this.handlePreview,onChange:this.handleChange,children:r.length>=4?null:s}),Object(ae.jsx)(Ne.a,{visible:t,title:n,footer:null,onCancel:this.handleCancel,children:Object(ae.jsx)("img",{alt:"example",style:{width:"100%"},src:a})})]})}}]),a}(r.PureComponent),ht=a(118),pt=a(311),jt=a(312),mt=a.n(jt),ft=a(313),bt=a.n(ft),Ot=(a(563),function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;Object(w.a)(this,a),(r=t.call(this,e)).state={editorState:ht.EditorState.createEmpty(),textarea:""},r.onEditorStateChange=function(e){r.setState({editorState:e,textarea:mt()(Object(ht.convertToRaw)(e.getCurrentContent()))})},r.getDetail=function(){return r.state.textarea},r.uploadImageCallBack=function(e){return new Promise((function(t,a){var r=new XMLHttpRequest;r.open("POST","/manage/img/upload");var n=new FormData;n.append("image",e),r.send(n),r.addEventListener("load",(function(){var e=JSON.parse(r.responseText).data.url;t({data:{link:e}})})),r.addEventListener("error",(function(){var e=JSON.parse(r.responseText);a(e)}))}))};var n=r.props.detail;if(n){var s=bt()(n);if(s){var i=ht.ContentState.createFromBlockArray(s.contentBlocks),c=ht.EditorState.createWithContent(i);r.state={editorState:c,textarea:n}}}return r}return Object(k.a)(a,[{key:"render",value:function(){var e=this.state.editorState;return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(pt.Editor,{editorState:e,editorStyle:{border:"1px solid black",height:"200px",padding:"5px"},onEditorStateChange:this.onEditorStateChange,toolbar:{image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}}),Object(ae.jsx)("textarea",{disabled:!0,value:this.state.textarea,style:{width:"100%",height:"200px",padding:"5px"}})]})}}]),a}(r.PureComponent)),gt=P.a.Item,xt=O.a.TextArea,vt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;Object(w.a)(this,a),(r=t.call(this,e)).state={options:[]},r.onFinish=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s,i,c,o,l,u,d,h,p;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.pwRef.current,n=r.rteRef.current,s=a.getImgs(),i=n.getDetail(),c=t.productName,o=t.productDescription,l=t.productPrice,1===(u=t.productCategory).length?(d="0",h=u[0]):(d=u[0],h=u[1]),p={name:c,desc:o,price:l,imgs:s,detail:i,pCategoryId:d,categoryId:h},r.isUpdate&&(p._id=r.product._id),e.next=10,H(p);case 10:0===e.sent.status?(v.b.success("Product ".concat(r.isUpdate?"updated":"added"," successfully!")),r.props.history.goBack()):v.b.error("Failed to ".concat(r.isUpdate?"update":"add","!"));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onFinishFailed=function(e){v.b.error("Submit failed!")},r.initOptions=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s,i,c,o,l,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.map((function(e){return{value:e._id,label:e.name,isLeaf:!1}})),n=Object(ct.a)(r),s=n.isUpdate,i=n.product,c=i.pCategoryId,!s||"0"===c){e.next=10;break}return e.next=6,r.getCategories(c);case 6:o=e.sent,l=o.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),(u=a.find((function(e){return e.value===c})))&&(u.children=l);case 10:r.setState({options:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getCategories=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:if(0!==(a=e.sent).status){e.next=10;break}if(n=a.data,"0"!==t){e.next=9;break}r.initOptions(n),e.next=10;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadData=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t[0]).loading=!0,e.next=4,r.getCategories(a.value);case 4:n=e.sent,a.loading=!1,n&&n.length>0?(s=n.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),a.children=s):a.isLeaf=!0,r.setState({options:Object(it.a)(r.state.options)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.pwRef=n.a.createRef(),r.rteRef=n.a.createRef();var s=r.props.location.state;return r.isUpdate=!!s,r.product=s||{},r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.getCategories("0")}},{key:"render",value:function(){var e=this,t=this.isUpdate,a=this.product,r=a.categoryId,n=a.pCategoryId,s=a.imgs,i=a.detail,c=[];t&&("0"===n||c.push(n),c.push(r));var o=Object(ae.jsxs)("span",{style:{fontSize:20,fontWeight:"bold"},children:[Object(ae.jsx)(f.a,{type:"link",children:Object(ae.jsx)(ot.a,{style:{fontSize:20},onClick:function(){return e.props.history.goBack()}})}),t?"Modify Product":"Add Product"]});return Object(ae.jsx)(Ae.a,{title:o,children:Object(ae.jsxs)(P.a,Object(se.a)(Object(se.a)({},{labelCol:{span:2},wrapperCol:{span:8}}),{},{initialValues:{productName:a.name,productDescription:a.desc,productPrice:a.price,productCategory:c},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,scrollToFirstError:!0,children:[Object(ae.jsx)(gt,{name:"productName",label:"Product Name",rules:[{required:!0,message:"Product name is required"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input product name"})}),Object(ae.jsx)(gt,{name:"productDescription",label:"Product Description",rules:[{required:!0,message:"Product description is required"}],children:Object(ae.jsx)(xt,{placeholder:"Please input product description",autoSize:{minRows:2,maxRows:6}})}),Object(ae.jsx)(gt,{name:"productPrice",label:"Product Price",rules:[{required:!0,message:"Product price is required"},{validator:function(e,t){return 1*t>0?Promise.resolve():Promise.reject(new Error("Price has to be bigger than 0"))}}],children:Object(ae.jsx)(O.a,{type:"number",placeholder:"Please input product price",addonBefore:"$"})}),Object(ae.jsx)(gt,{name:"productCategory",label:"Product Category",rules:[{required:!0,message:"Product category is required"}],children:Object(ae.jsx)(st.a,{options:this.state.options,loadData:this.loadData})}),Object(ae.jsx)(gt,{name:"productPicture",label:"Product Picture",children:Object(ae.jsx)(dt,{ref:this.pwRef,imgs:s})}),Object(ae.jsx)(gt,{name:"productDetail",label:"Product Detail",labelCol:{span:2},wrapperCol:{span:18},children:Object(ae.jsx)(Ot,{ref:this.rteRef,detail:i})}),Object(ae.jsx)(gt,Object(se.a)(Object(se.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:Object(ae.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})}}]),a}(r.Component),yt=(a(564),a(235)),wt=yt.b.Item,kt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={classification:"",category:""},e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a,r,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.location.state.product,a=t.pCategoryId,r=t.categoryId,"0"!==a){e.next=8;break}return e.next=4,L(r);case 4:(n=e.sent).data&&this.setState({classification:n.data.name}),e.next=13;break;case 8:return e.next=10,Promise.all([L(a),L(r)]);case 10:(s=e.sent)[0].data&&this.setState({classification:s[0].data.name}),s[1].data&&this.setState({category:s[1].data.name});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.location.state.product,a=t.name,r=t.desc,n=t.price,s=t.detail,i=t.imgs,c=t.status,o=this.state,l=o.classification,u=o.category,d=Object(ae.jsxs)("span",{style:{fontSize:20,fontWeight:"bold"},children:[Object(ae.jsx)(f.a,{type:"link",children:Object(ae.jsx)(ot.a,{style:{fontSize:20},onClick:function(){return e.props.history.goBack()}})}),"Product Detail"]});return Object(ae.jsx)(Ae.a,{title:d,className:"product-detail",children:Object(ae.jsxs)(yt.b,{children:[Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Product Name:"}),Object(ae.jsx)("span",{className:"right",children:a})]}),Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Product Description:"}),Object(ae.jsx)("span",{className:"right",children:r})]}),Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Product price:"}),Object(ae.jsxs)("span",{className:"right",children:["$",n]})]}),Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Category:"}),Object(ae.jsxs)("span",{className:"right",children:[l," ",u?"--\x3e "+u:""]})]}),Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Product Picture:"}),Object(ae.jsx)("span",{className:"right",children:i.map((function(e){return Object(ae.jsx)("img",{src:N+e,alt:"Product"},e)}))})]}),Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Product Detail:"}),Object(ae.jsx)("span",{className:"right",dangerouslySetInnerHTML:{__html:s}})]}),Object(ae.jsxs)(wt,{children:[Object(ae.jsx)("span",{className:"left",children:"Product Status:"}),Object(ae.jsx)("span",{className:"right",children:1===c?"Available":"Unavailable"})]})]})})}}]),a}(r.Component),Ct=ie.a.Option,St=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).state={loading:!1,products:[],total:0,keywords:"",searchType:"productName",Status:0},r.initColumns=function(){r.columns=[{title:"Product Name",width:300,dataIndex:"name"},{title:"Product Description",dataIndex:"desc"},{title:"Price",width:120,dataIndex:"price",render:function(e){return"$"+e}},{title:"Status",width:150,render:function(e){var t=e.status,a=e._id,n=1===t?2:1;return Object(ae.jsxs)("span",{children:[Object(ae.jsx)(f.a,{type:"primary",onClick:function(){return r.updateStatus(a,n)},children:1===t?"Withdraw":"Launch"}),Object(ae.jsx)("span",{children:1===t?"Available":"Unavailable"})]})}},{title:"Action",width:150,render:function(e){return Object(ae.jsxs)("span",{children:[Object(ae.jsx)(f.a,{type:"link",onClick:function(){return r.props.history.push("/product/addupdate",e)},children:"Modify"}),Object(ae.jsx)(f.a,{type:"link",onClick:function(){return r.props.history.push("/product/detail",{product:e})},children:"View"})]})}}]},r.getProducts=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s,i,c,o,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.pageNum=t,r.setState({loading:!0}),a=r.state,n=a.searchType,!(s=a.keywords)){e.next=9;break}return e.next=6,V(t,5,n,s);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,z(t,5);case 11:i=e.sent;case 12:r.setState({loading:!1}),0===i.status&&(c=i.data,o=c.list,l=c.total,r.setState({total:l,products:o}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.updateStatus=function(){var e=Object(y.a)(x.a.mark((function e(t,a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t,a);case 2:0===e.sent.status&&(v.b.success("Product status updated successfully!"),r.getProducts(r.pageNum));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.initColumns(),r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.getProducts(1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,r=t.total,n=t.loading,s=t.searchType,i=t.keywords,c=Object(ae.jsxs)("span",{children:[Object(ae.jsxs)(ie.a,{value:s,style:{width:150},onChange:function(t){return e.setState({searchType:t})},children:[Object(ae.jsx)(Ct,{value:"productName",children:"Search by name"}),Object(ae.jsx)(Ct,{value:"productDesc",children:"Search by description"})]}),Object(ae.jsx)(O.a,{placeholder:"keywords",style:{width:150,margin:"0 5px"},value:i,onChange:function(t){return e.setState({keywords:t.target.value})}}),Object(ae.jsx)(f.a,{type:"primary",onClick:function(){return e.getProducts(1)},children:"Search"})]}),o=Object(ae.jsxs)(f.a,{type:"primary",onClick:function(){return e.props.history.push("/product/addupdate")},children:[Object(ae.jsx)(Ze.a,{}),"Add"]});return Object(ae.jsx)(Ae.a,{title:c,extra:o,children:Object(ae.jsx)(Ye.a,{bordered:!0,rowKey:"_id",loading:n,dataSource:a,columns:this.columns,pagination:{current:this.pageNum,total:r,defaultPageSize:5,showQuickJumper:!0,onChange:this.getProducts}})})}}]),a}(r.Component),Pt=(a(566),function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){return Object(ae.jsxs)(m.d,{children:[Object(ae.jsx)(m.b,{exact:!0,path:"/product",component:St}),Object(ae.jsx)(m.b,{path:"/product/addupdate",component:vt}),Object(ae.jsx)(m.b,{path:"/product/detail",component:kt}),Object(ae.jsx)(m.a,{to:"/product"})]})}}]),a}(r.Component)),Nt=P.a.Item,Rt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).formRef=n.a.createRef(),r.props.setFormRef(r.formRef),r}return Object(k.a)(a,[{key:"render",value:function(){return Object(ae.jsx)(P.a,Object(se.a)(Object(se.a)({ref:this.formRef},{labelCol:{span:6},wrapperCol:{span:16}}),{},{children:Object(ae.jsx)(Nt,{name:"roleName",label:"Role Name",rules:[{required:!0,message:"role name is required"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input role name"})})}))}}]),a}(r.PureComponent),_t=(a(567),a(317)),Ut=P.a.Item,Tt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;Object(w.a)(this,a),(r=t.call(this,e)).state={checkedKeys:[],roleName:""},r.onCheck=function(e,t){r.setState({checkedKeys:e})},r.getMenus=function(){return r.state.checkedKeys};var s=r.props.role;return r.state={checkedKeys:s.menus,roleName:s.name},r.formRef=n.a.createRef(),r.props.setFormRef(r.formRef),r}return Object(k.a)(a,[{key:"render",value:function(){var e=[{title:"Platform permission",key:"all",children:we}];return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(P.a,Object(se.a)(Object(se.a)({ref:this.formRef,initialValues:{roleName:this.state.roleName}},{labelCol:{span:6},wrapperCol:{span:16}}),{},{children:Object(ae.jsx)(Ut,{name:"roleName",label:"Role Name",rules:[{required:!0,message:"role name is required"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input role name"})})})),Object(ae.jsx)(_t.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:this.state.checkedKeys,onCheck:this.onCheck,treeData:e})]})}}]),a}(r.PureComponent),At=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).state={roles:[],role:{},showStatus:0},r.initColumns=function(){r.columns=[{title:"Role Name",dataIndex:"name"},{title:"Creation Time",dataIndex:"create_time",render:_e},{title:"Authorization Time",dataIndex:"auth_time",render:_e},{title:"Authorized By",dataIndex:"auth_name"}]},r.getRoles=Object(y.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/api/roles");case 2:0===(t=e.sent).status&&(a=t.data,r.setState({roles:a}));case 4:case"end":return e.stop()}}),e)}))),r.onRow=function(e){return{onClick:function(t){r.setState({role:e})}}},r.handleCancel=function(){r.setState({showStatus:0})},r.addRole=function(){r.formRef.current.validateFields().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({showStatus:0}),a=t.roleName,e.next=4,$(a);case 4:0===(n=e.sent).status?(v.b.success("Role added successfully!"),s=n.data,r.setState((function(e){return{roles:[].concat(Object(it.a)(e.roles),[s])}}))):v.b.error("Failed to add role!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},r.updateRole=function(){r.formRef.current.validateFields().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({showStatus:0}),a=r.ufRef.current,(n=r.state.role).name=t.roleName,n.menus=a.getMenus(),s=U.getUser(),n.auth_name=s.username,n.auth_time=Date.now(),e.next=10,B(n);case 10:0===e.sent.status?n._id===s.role_id?(U.removeUser(),v.b.success("Permission modified, please log in again!")):(v.b.success("Role updated successfully!"),r.setState({roles:Object(it.a)(r.state.roles)})):v.b.error("Failed to update role!");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},r.showAdd=function(){r.setState({showStatus:1})},r.showUpdate=function(){r.setState({showStatus:2})},r.initColumns(),r.ufRef=n.a.createRef(),r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){var e=this,t=this.state,a=t.roles,r=t.role,n=t.showStatus,s=Object(ae.jsxs)("span",{children:[Object(ae.jsx)(f.a,{type:"primary",onClick:this.showAdd,children:"Add Role"}),"\xa0\xa0",Object(ae.jsx)(f.a,{type:"primary",disabled:!r._id|"admin"===r.name,onClick:this.showUpdate,children:"Permission Setting"})]});return Object(ae.jsxs)(Ae.a,{title:s,children:[Object(ae.jsx)(Ye.a,{bordered:!0,onRow:this.onRow,rowSelection:{type:"radio",selectedRowKeys:[r._id],onSelect:function(t){e.setState({role:t})}},rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:5,showQuickJumper:!0}}),Object(ae.jsx)(Ne.a,{title:"Add Role",visible:1===n,onOk:this.addRole,onCancel:this.handleCancel,getContainer:!1,children:Object(ae.jsx)(Rt,{setFormRef:function(t){return e.formRef=t}})}),Object(ae.jsx)(Ne.a,{title:"Permission Setting",visible:2===n,onOk:this.updateRole,onCancel:this.handleCancel,getContainer:!1,children:Object(ae.jsx)(Tt,{ref:this.ufRef,role:r,setFormRef:function(t){return e.formRef=t}})})]})}}]),a}(r.Component),Ft=a(323),It=P.a.Item,Dt=ie.a.Option,qt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).formRef=n.a.createRef(),r.props.setFormRef(r.formRef),r}return Object(k.a)(a,[{key:"render",value:function(){var e=Object(ae.jsx)(It,{name:"prefix",noStyle:!0,children:Object(ae.jsx)(ie.a,{style:{width:70},children:Object(ae.jsx)(Dt,{value:"1",children:"+1"})})}),t=this.props,a=t.user,r=t.roles;return Object(ae.jsxs)(P.a,Object(se.a)(Object(se.a)({initialValues:{username:a.username,phone:a.phone,email:a.email,role_id:a.role_id,prefix:"1"},ref:this.formRef},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{children:[Object(ae.jsx)(It,{name:"username",label:"Username",rules:[{required:!0,message:"Username is required"},{min:6,message:"Username has to be no less than 6 digits"},{max:12,message:"Username has to be no more than 12 digits"},{pattern:/^[\w]+$/,message:"Username must include only the following character types: uppercase, lowercase, numbers, and _ symbol."}],children:Object(ae.jsx)(O.a,{placeholder:"Please input username"})}),Object(ae.jsx)(It,{name:"password",label:"Password",rules:[{required:!0,message:"Password is required"},{pattern:/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,16}$/,message:"Password must include 8 to 16 digits and at least two of the following character types: letters, numbers and special characters."}],hasFeedback:!0,children:Object(ae.jsx)(O.a.Password,{placeholder:"Please input password"})}),Object(ae.jsx)(It,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(ae.jsx)(O.a.Password,{placeholder:"Please confirm password"})}),Object(ae.jsx)(It,{name:"phone",label:"Phone Number",rules:[{required:!0,message:"Phone Number is required"},{pattern:/^[0-9]{10}$/,message:"Please enter your 10 digits phone number"}],children:Object(ae.jsx)(O.a,{type:"number",placeholder:"Please input phone number",addonBefore:e,style:{width:"100%"}})}),Object(ae.jsx)(It,{name:"email",label:"Email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:Object(ae.jsx)(O.a,{placeholder:"Please input email address"})}),Object(ae.jsx)(It,{name:"role_id",label:"Role",rules:[{required:!0,message:"Email is required"}],children:Object(ae.jsx)(ie.a,{placeholder:"Please select role",children:r.map((function(e){return Object(ae.jsx)(Dt,{value:e._id,children:e.name},e._id)}))})})]}))}}]),a}(r.PureComponent),Mt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(e){var r;return Object(w.a)(this,a),(r=t.call(this,e)).state={loading:!1,users:[],roles:[],user:{},showStatus:!1},r.initColumns=function(){r.columns=[{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"Phone Number",dataIndex:"phone"},{title:"Creation Time",dataIndex:"create_time",render:_e},{title:"Role",dataIndex:"role_id",render:function(e){return r.roleNames[e]}},{title:"Action",width:300,render:function(e){return Object(ae.jsxs)("span",{children:[Object(ae.jsx)(f.a,{type:"link",onClick:function(){return r.showAddOrUpdate(e)},children:"Modify"}),Object(ae.jsx)(f.a,{type:"link",onClick:function(){return r.deleteUser(e)},children:"Delete"})]})}}]},r.initRoleNames=function(e){r.roleNames=e.reduce((function(e,t){return e[t._id]=t.name,e}),{})},r.handleCancel=function(){r.setState({showStatus:!1})},r.addOrUpdateUser=function(){r.formRef.current.validateFields().then(function(){var e=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({showStatus:!1}),a=t,r.state.user._id&&(a._id=r.state.user._id),e.next=5,G(a);case 5:0===e.sent.status?(v.b.success("User ".concat(a._id?"updated":"added"," successfully!")),r.getUsers()):v.b.error("Failed to ".concat(a._id?"update":"add"," user!"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},r.showAddOrUpdate=function(e){r.setState({showStatus:!0}),e&&r.setState({user:e})},r.deleteUser=function(e){(0,Ne.a.confirm)({title:"Do you want to delete ".concat(e.username,"?"),icon:Object(ae.jsx)(Ft.a,{}),onOk:function(){var t=Object(y.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I("/api/users",{userId:e._id},"DELETE");case 2:0===t.sent.status?(v.b.success("User deleted sucessfully!"),r.getUsers()):v.b.error("Failed to delete user!");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},r.getUsers=Object(y.a)(x.a.mark((function e(){var t,a,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/api/users");case 2:0===(t=e.sent).status&&(a=t.data,n=a.roles,s=a.users,r.initRoleNames(n),r.setState({roles:n,users:s}));case 4:case"end":return e.stop()}}),e)}))),r.initColumns(),r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,r=t.user,n=t.roles,s=t.showStatus,i=t.loading,c=Object(ae.jsx)(f.a,{type:"primary",onClick:this.showAddOrUpdate,children:"Add User"});return Object(ae.jsxs)(Ae.a,{title:c,children:[Object(ae.jsx)(Ye.a,{bordered:!0,rowKey:"_id",loading:i,dataSource:a,columns:this.columns,pagination:{defaultPageSize:5,showQuickJumper:!0}}),Object(ae.jsx)(Ne.a,{title:r._id?"Update User":"Add User",visible:s,onOk:this.addOrUpdateUser,onCancel:this.handleCancel,getContainer:!1,children:Object(ae.jsx)(qt,{user:r,roles:n,setFormRef:function(t){return e.formRef=t}})})]})}}]),a}(r.Component),Et=a(135),Lt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={accounts:["admin","Jerry123","Tom123","John123","Paul123","David123"],page_view:[188,221,231,152,180,213],scroll:[90,113,127,75,90,100],user_engagement:[69,82,93,45,65,71],session_start:[6,8,9,4,5,6],first_visit:[2,2,3,4,5,1]},e.update=function(){e.setState((function(e){return{accounts:e.accounts,page_view:e.page_view,scroll:e.scroll,user_engagement:e.user_engagement,session_start:e.session_start,first_visit:e.first_visit}}))},e.getOption=function(e,t,a,r,n,s){return{title:{text:"Bar Chart"},tooltip:{},legend:{data:["page_view","scroll","user_engagement","session_start","first_visit"]},xAxis:{data:s},yAxis:{},series:[{name:"page_view",type:"bar",data:e},{name:"scroll",type:"bar",data:t},{name:"user_engagement",type:"bar",data:a},{name:"session_start",type:"bar",data:r},{name:"first_visit",type:"bar",data:n}]}},e}return Object(k.a)(a,[{key:"render",value:function(){var e=this.state,t=e.page_view,a=e.scroll,r=e.user_engagement,n=e.session_start,s=e.first_visit,i=e.accounts;return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Ae.a,{children:Object(ae.jsx)(f.a,{type:"primary",onClick:this.update,children:"Update"})}),Object(ae.jsx)(Ae.a,{title:"User events by account",children:Object(ae.jsx)(Et.a,{option:this.getOption(t,a,r,n,s,i),style:{height:600}})})]})}}]),a}(r.Component),zt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={dateList:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],direct:[11,12,13,14,15,11,13],referral:[6,3,7,4,9,4,8]},e.update=function(){e.setState((function(e){return{direct:e.direct,referral:e.referral,dateList:e.dateList}}))},e.getOption=function(e,t,a){return{visualMap:{show:!1,type:"continuous",seriesIndex:0},title:{text:"Line Chart"},tooltip:{trigger:"axis"},legend:{data:["direct","referral"]},xAxis:{data:a},yAxis:{},grid:{},series:[{name:"direct",type:"line",data:e},{name:"referral",type:"line",data:t}]}},e}return Object(k.a)(a,[{key:"render",value:function(){var e=this.state,t=e.direct,a=e.referral,r=e.dateList;return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Ae.a,{children:Object(ae.jsx)(f.a,{type:"primary",onClick:this.update,children:"Update"})}),Object(ae.jsx)(Ae.a,{title:"Weekly User Data",children:Object(ae.jsx)(Et.a,{option:this.getOption(t,a,r),style:{height:600}})})]})}}]),a}(r.Component),Vt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:[{value:78,name:"United Kingdom"},{value:106,name:"Australia"},{value:132,name:"France"},{value:145,name:"Germany"},{value:200,name:"United States of America"},{value:226,name:"Canada"}]},e.update=function(){e.setState((function(e){return{data:e.data}}))},e.getOption=function(){return{backgroundColor:"#ddd",title:{text:"Pie Chart",top:20,textStyle:{color:"#000"}},legend:{top:"bottom"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!0},restore:{show:!0},saveAsImage:{show:!0}}},series:{name:"Area mode",type:"pie",radius:[50,250],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:e.state.data}}},e}return Object(k.a)(a,[{key:"render",value:function(){return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Ae.a,{children:Object(ae.jsx)(f.a,{type:"primary",onClick:this.update,children:"Update"})}),Object(ae.jsx)(Ae.a,{title:"Users By Country",children:Object(ae.jsx)(Et.a,{option:this.getOption(),style:{height:600}})})]})}}]),a}(r.Component),Jt=(a(254),a(111)),Ht=(a(255),a(64)),Wt=(a(574),function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).goHome=function(){e.props.setHeadTitle("Home"),e.props.history.replace("/home")},e}return Object(k.a)(a,[{key:"render",value:function(){var e=this;return Object(ae.jsxs)(Jt.a,{className:"not-found",children:[Object(ae.jsx)(Ht.a,{span:12,className:"left"}),Object(ae.jsxs)(Ht.a,{span:12,className:"right",children:[Object(ae.jsx)("h1",{children:"Error 404"}),Object(ae.jsx)("h2",{children:"Sorry, we couldn't find that Web page!"}),Object(ae.jsx)(f.a,{type:"primary",onClick:function(){return e.goHome()},size:"large",children:"Return to Home"})]})]})}}]),a}(r.Component)),$t=Object(c.b)((function(e){return{}}),{setHeadTitle:ke})(Wt),Bt=he.a.Footer,Kt=he.a.Sider,Gt=he.a.Content,Yt=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(w.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).routeList={"/home":Ge,"/category":nt,"/product":Pt,"/role":At,"/user":Mt,"/charts/engagement":Lt,"/charts/acquisition":zt,"/charts/demographics":Vt},e.getRouteNodes=function(t){return t.role.menus.map((function(t){return e.routeList[t]?Object(ae.jsx)(m.b,{path:t,component:e.routeList[t]},t):null}))},e}return Object(k.a)(a,[{key:"render",value:function(){var e=U.getUser();return e&&e._id?(this.routeNodes=this.getRouteNodes(e),Object(ae.jsxs)(he.a,{style:{minHeight:"100%"},children:[Object(ae.jsx)(Kt,{children:Object(ae.jsx)(Pe,{})}),Object(ae.jsxs)(he.a,{children:[Object(ae.jsx)(Te,{}),Object(ae.jsx)(Gt,{style:{margin:20,backgroundColor:"#fff"},children:Object(ae.jsxs)(m.d,{children:[Object(ae.jsx)(m.a,{exact:!0,from:"/",to:"/home"}),this.routeNodes,Object(ae.jsx)(m.b,{component:$t})]})}),Object(ae.jsx)(Bt,{style:{textAlign:"center",color:"#cccccc"},children:"This website is for learning and communication only, not for commercial use."})]})]})):Object(ae.jsx)(m.a,{to:"/login"})}}]),a}(r.Component);var Qt=function(){return Object(ae.jsx)(j.a,{basename:"/",children:Object(ae.jsxs)(m.d,{children:[Object(ae.jsx)(m.b,{path:"/login",component:ne}),Object(ae.jsx)(m.b,{path:"/register",component:de}),Object(ae.jsx)(m.b,{path:"/",component:Yt})]})})};i.a.render(Object(ae.jsx)(n.a.StrictMode,{children:Object(ae.jsx)(c.a,{store:p,children:Object(ae.jsx)(Qt,{})})}),document.getElementById("root"))}},[[575,1,2]]]);
//# sourceMappingURL=main.1f3e1142.chunk.js.map